<div #timelineEventsScrollContainer cdkScrollable class="relative pt-8 pb-2 overflow-auto" (scroll)="timelineEventsScrollContainerScroll()" (wheel)="onWheel($event)" (mouseleave)="timelineEventsScrollContainerMouseLeave()" (mousemove)="timelineEventsScrollContainerMouseOver($event)" (mousewheel)="timelineEventsScrollContainerMouseWheel($event)" (click)="timelineEventsScrollContainerClick($event)" (keydown.enter)="timelineEventsScrollContainerKeyDown()">
  <div *ngIf="clipToEventActive || playbackDownloadActive || playbackShareActive" class="bg-anti-flash-white fixed top-4 left-1/2 transform -translate-x-1/2 px-4 py-2 text-black text-sm font-normal rounded-md shadow-md z-50 animate-in fade-in">Choose the beginning of your clip on timeline</div>
  <div *ngIf="mappedData$ | async" class="absolute top-0 text-xs text-dim-gray" [style.left]="'calc(' + padding + 'px + ' + (scrollX$ | async) + 'px)'">
    {{ visibleStartDate$ | async | dateFormat : 'jsDate' : 'shortTimeFormat' }}
  </div>
  <div *ngIf="mappedData$ | async" class="absolute top-0 translate-x-[-100%] text-xs text-dim-gray" [style.left]="'calc(100% - ' + padding + 'px + ' + (scrollX$ | async) + 'px)'">
    {{ visibleEndDate$ | async | dateFormat : 'jsDate' : 'shortTimeFormat' }}
  </div>

  <div class="h-[1px] min-w-full bg-platinum" [style.width]="(timelinePixelWidth$ | async) + 'px'"></div>

  <ng-container *ngIf="mappedData$ | async as mappedData; else noDataTemplate">
    <div class="relative h-28">
      <div class="absolute top-1/2 translate-y-[-50%] h-[1px] min-w-full bg-platinum" [style.width]="(timelinePixelWidth$ | async) + 'px'"></div>

      <div class="absolute top-1/2 translate-y-[-50%] h-7 rounded-3xl bg-[#D9D9D9]" *ngFor="let event of mappedData.events" [style.left]="event.x1 + 'px'" [style.width]="event.x2 - event.x1 + 'px'"></div>

      <ng-container *ngIf="alarmHighlightRanges$ | async as alarmRanges">
        <div
          *ngFor="let range of alarmRanges; trackBy: trackByAlarmRange; let i = index"
          class="absolute top-1/2 translate-y-[-50%] h-7 rounded-3xl z-10 contain-layout contain-paint"
          [ngClass]="{
            'bg-extra-two--30': true
          }"
          [style.left]="range.x1 + 'px'"
          [style.width]="range.x2 - range.x1 + 'px'"
          [appTooltip]="range.count && range.count > 1 ? range.name : range.name + ' - ' + range.type">
          <div [appTooltip]="clipToEventActive ? 'Choose the beginning of your clip on timeline' : ''" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10">
            <div class="relative group" #alarmMenuTrigger="cdkMenuTriggerFor" [cdkMenuTriggerFor]="alarmMenu" [cdkMenuPosition]="[{ originX: 'center', originY: 'top', overlayX: 'center', overlayY: 'bottom', offsetY: -8 }]" (click)="toggleAlarmGroup(range, $event, i)" (mouseenter)="onGroupHover(true)" (mouseleave)="onGroupHover(false)" (keydown.enter)="toggleAlarmGroupByKeyboard(range, i)">
              <div class="flex items-center justify-center w-9 h-9 cursor-pointer transform transition-all duration-200 hover:scale-110 active:scale-95 backdrop-blur rounded-full border border-new-gray-700 active:opacity-80">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M16 1C24.2843 1 31 7.71573 31 16C31 24.2843 24.2843 31 16 31C7.71573 31 1 24.2843 1 16C1 7.71573 7.71573 1 16 1Z" fill="white" stroke="#BDBDBD" stroke-width="2" />
                  <path d="M20.5303 18.69C19.4441 19.0726 18.3019 19.272 17.1503 19.28C16.8003 19.28 16.4103 19.28 15.9903 19.28C15.5703 19.28 15.1903 19.28 14.8403 19.28C13.6887 19.272 12.5465 19.0726 11.4603 18.69C11.4139 18.6681 11.373 18.6359 11.3408 18.5959C11.3086 18.5559 11.2859 18.5091 11.2743 18.4591C11.2628 18.409 11.2627 18.357 11.2741 18.307C11.2856 18.2569 11.3082 18.2101 11.3403 18.17L12.2703 17.06V14C12.2441 13.4946 12.321 12.9891 12.4964 12.5144C12.6718 12.0397 12.9419 11.6056 13.2904 11.2386C13.6389 10.8716 14.0584 10.5793 14.5234 10.3796C14.9884 10.1799 15.4892 10.0769 15.9953 10.0769C16.5014 10.0769 17.0022 10.1799 17.4672 10.3796C17.9322 10.5793 18.3517 10.8716 18.7002 11.2386C19.0487 11.6056 19.3188 12.0397 19.4942 12.5144C19.6696 12.9891 19.7465 13.4946 19.7203 14V17.1L20.6503 18.21C20.6753 18.249 20.6921 18.2927 20.6996 18.3384C20.7071 18.3842 20.7051 18.4309 20.6939 18.4759C20.6826 18.5208 20.6623 18.563 20.6342 18.5998C20.6061 18.6367 20.5707 18.6673 20.5303 18.69Z" fill="#FA460F" />
                  <path d="M16.0002 9.88C16.4641 9.88 16.8402 9.50392 16.8402 9.04C16.8402 8.57608 16.4641 8.2 16.0002 8.2C15.5362 8.2 15.1602 8.57608 15.1602 9.04C15.1602 9.50392 15.5362 9.88 16.0002 9.88Z" fill="#FA460F" />
                  <path d="M17.3478 20C17.364 20.1877 17.3409 20.3768 17.2801 20.5551C17.2194 20.7335 17.1222 20.8972 16.9948 21.0361C16.8674 21.1749 16.7126 21.2857 16.5401 21.3615C16.3676 21.4374 16.1812 21.4765 15.9928 21.4765C15.8044 21.4765 15.618 21.4374 15.4455 21.3615C15.2731 21.2857 15.1182 21.1749 14.9908 21.0361C14.8634 20.8972 14.7662 20.7335 14.7055 20.5551C14.6447 20.3768 14.6217 20.1877 14.6378 20C14.6342 19.7611 14.6965 19.5258 14.8178 19.32C15.1678 19.32 15.5578 19.32 15.9678 19.32C16.3778 19.32 16.7778 19.32 17.1278 19.32C17.2632 19.5217 17.3395 19.7572 17.3478 20Z" fill="white" />
                  <path d="M20.5327 18.69C19.0759 19.1829 17.5384 19.3933 16.0027 19.31C14.4638 19.3917 12.9234 19.1813 11.4627 18.69C11.4176 18.6667 11.3781 18.6338 11.347 18.5937C11.3159 18.5536 11.2938 18.5072 11.2824 18.4578C11.271 18.4083 11.2705 18.3569 11.2809 18.3072C11.2913 18.2575 11.3124 18.2107 11.3427 18.17L12.2727 17.06V14C12.2718 13.2615 12.49 12.5394 12.8998 11.9251C13.3096 11.3108 13.8925 10.8319 14.5747 10.5492C15.2568 10.2665 16.0076 10.1926 16.7318 10.3369C17.456 10.4813 18.1211 10.8373 18.6427 11.36C19.3328 12.0658 19.7203 13.0129 19.7227 14V17.1L20.6527 18.21C20.6777 18.249 20.6945 18.2927 20.702 18.3384C20.7095 18.3842 20.7076 18.4309 20.6963 18.4759C20.6851 18.5208 20.6648 18.563 20.6366 18.5998C20.6085 18.6367 20.5732 18.6673 20.5327 18.69Z" stroke="#414042" stroke-width="1.49333" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M16.0002 9.88C16.4641 9.88 16.8402 9.50392 16.8402 9.04C16.8402 8.57608 16.4641 8.2 16.0002 8.2C15.5362 8.2 15.1602 8.57608 15.1602 9.04C15.1602 9.50392 15.5362 9.88 16.0002 9.88Z" stroke="#414042" stroke-width="1.49333" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M7.99849 21.05C7.02781 19.5639 6.48863 17.8376 6.44096 16.0632C6.39329 14.2888 6.83901 12.5361 7.72849 11" stroke="#414042" stroke-width="1.49333" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M24.2739 11C25.1634 12.5361 25.6091 14.2888 25.5614 16.0632C25.5138 17.8376 24.9746 19.5639 24.0039 21.05" stroke="#414042" stroke-width="1.49333" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M5.41308 22.62C4.21323 20.6642 3.57813 18.4145 3.57812 16.12C3.57812 13.8255 4.21323 11.5758 5.41308 9.62001" stroke="#414042" stroke-width="1.49333" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M26.5898 9.57001C27.7996 11.5314 28.4402 13.7905 28.4402 16.095C28.4402 18.3995 27.7996 20.6586 26.5898 22.62" stroke="#414042" stroke-width="1.49333" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M17.1806 19.31C17.2971 19.5178 17.359 19.7518 17.3606 19.99C17.3606 20.3507 17.2173 20.6966 16.9623 20.9517C16.7072 21.2067 16.3613 21.35 16.0006 21.35C15.6399 21.35 15.294 21.2067 15.039 20.9517C14.7839 20.6966 14.6406 20.3507 14.6406 19.99C14.6422 19.7518 14.7041 19.5178 14.8206 19.31" stroke="#414042" stroke-width="1.49333" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <div *ngIf="range.count && range.count > 1" class="absolute -top-2 -right-2 min-w-[20px] h-4 px-1 rounded-full bg-extra-one group-hover:bg-main-primary transition-colors duration-200 flex items-center justify-center">
                  <span class="text-white text-xs font-medium">{{ range.count }}</span>
                </div>
              </div>
              <div class="absolute -bottom-6 left-1/2 -translate-x-1/2 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                <div class="px-2 py-1 rounded bg-white shadow-lg border border-platinum backdrop-blur-sm bg-opacity-95">
                  <span class="text-xs text-dim-gray flex items-center gap-1">
                    <svg class="w-3 h-3" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M19 9l-7 7-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <ng-container *ngIf="range.isExpanded; else closedAlarmTooltip">
                      {{ isGroupHovered ? 'Click to close alarms' : 'Alarms menu open' }}
                    </ng-container>
                    <ng-template #closedAlarmTooltip>
                      {{ isGroupHovered ? 'Click to view alarms' : range.count && range.count > 1 ? range.count + ' alarms available' : 'View alarm details' }}
                    </ng-template>
                  </span>
                </div>
              </div>
            </div>

            <ng-template #alarmMenu>
              <div class="w-[220px] flex flex-col bg-white shadow-lg rounded-md border border-platinum overflow-hidden animate-in slide-in-from-top-2 duration-200">
                <div class="max-h-[300px] overflow-y-auto backdrop-blur flex flex-col">
                  <div *ngFor="let alarm of range.count && range.count > 1 ? range.alarms : [range]" class="flex flex-col p-3 transition-all duration-200 group/item relative">
                    <div class="flex-col flex border-b border-new-gray-300 pb-3">
                      <div class="flex-row flex pt-3 gap-1">
                        <div class="absolute left-0 top-0 bottom-3 w-1 bg-main-primary scale-y-0 group-hover/item:scale-y-100 transition-transform duration-200"></div>
                        <div class="flex flex-col flex-grow">
                          <span class="text-sm font-medium group-hover/item:text-main-primary transition-colors duration-200">
                            {{ alarm.name }}
                          </span>
                        </div>
                      </div>
                      <div class="flex flex-col gap-2">
                        <div class="flex flex-row gap-1 items-center">
                          <span class="text-sm">
                            Time: <span>{{ formatAlarmTimeRange(alarm.start_time, alarm.end_time) }}</span>
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="flex gap-1"></div>
                  </div>
                </div>
              </div>
            </ng-template>
          </div>
        </div>
      </ng-container>

      <ng-container *ngFor="let group of mappedData.iconGroups; let i = index">
        <div [appTooltip]="clipToEventActive ? 'Choose the beginning of your clip on timeline' : ''" class="absolute z-50 top-1/2 translate-y-[-50%] translate-x-[-50%]" [style.left]="group.x + 'px'">
          <div class="relative group" #timelineTabMenuItem="cdkMenuTriggerFor" [cdkMenuTriggerFor]="menu" [cdkMenuPosition]="[{ originX: 'center', originY: 'top', overlayX: 'center', overlayY: 'bottom', offsetY: -8 }]" (click)="toggleGroup(group, $event)" (mouseenter)="onGroupHover(true)" (mouseleave)="onGroupHover(false)" (keydown.enter)="toggleGroupByKeyboard(group)">
            <div class="flex items-center justify-center w-9 h-9 cursor-pointer transform transition-all duration-200 hover:scale-110 active:scale-95 backdrop-blur rounded-full border border-new-gray-700 active:opacity-80">
              <app-timeline-events-icon [icon]="group.icons[0].icon" [eventName]="group.icons[0].eventName" [eventIcon]="group.icons[0].eventIcon" [class.ring-2]="isCurrentPosition(group.icons[0])" [class.ring-main-primary]="isCurrentPosition(group.icons[0])" [class.ring-offset-2]="isCurrentPosition(group.icons[0])"> </app-timeline-events-icon>
              <div class="absolute -top-2 -right-2 min-w-[20px] h-4 px-1 rounded-full bg-extra-one group-hover:bg-main-primary transition-colors duration-200 flex items-center justify-center">
                <span class="text-white text-xs font-medium">{{ group.icons.length }}</span>
              </div>
            </div>
            <div class="absolute -bottom-6 left-1/2 -translate-x-1/2 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200">
              <div class="px-2 py-1 rounded bg-white shadow-lg border border-platinum backdrop-blur-sm bg-opacity-95">
                <span class="text-xs text-dim-gray flex items-center gap-1">
                  <svg class="w-3 h-3" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 9l-7 7-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                  <ng-container *ngIf="group.isExpanded; else closedTooltip">
                    {{ isGroupHovered ? 'Click to close events' : 'Events menu open' }}
                  </ng-container>
                  <ng-template #closedTooltip>
                    {{ isGroupHovered ? 'Click to view events' : group.icons.length + ' events available' }}
                  </ng-template>
                </span>
              </div>
            </div>
          </div>

          <ng-template #menu>
            <div class="w-[220px] flex flex-col bg-white shadow-lg rounded-md border border-platinum overflow-hidden animate-in slide-in-from-top-2 duration-200">
              <div class="max-h-[300px] overflow-y-auto backdrop-blur flex flex-col">
                <div *ngFor="let icon of group.icons" class="flex flex-col p-3 transition-all duration-200 group/item relative">
                  <div class="flex-col flex border-b border-new-gray-300 pb-3">
                    <ng-container *appHasPermission="[[accessGroup.EVENTS_VIEWER]]; else staticEventRow">
                      <div class="flex justify-center object-cover w-full h-[105px] cursor-pointer relative group/thumbnail" *ngIf="icon.thumbnail" (keydown.enter)="openEventVideo(icon)" (click)="openEventVideo(icon); $event.stopPropagation()">
                        <img height="105" width="200" class="rounded-md" [src]="icon.thumbnail" alt="thumbnail" />
                        <div class="absolute inset-0 bg-opacity-40 flex items-center justify-center opacity-0 group-hover/thumbnail:opacity-100 transition-opacity duration-200 rounded-md">
                          <div class="w-12 h-12 rounded-full bg-white bg-opacity-80 flex items-center justify-center">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M8 5.14v14.72a.5.5 0 00.8.4l10.5-7.36a.5.5 0 000-.8L8.8 4.74a.5.5 0 00-.8.4z" fill="#EE8444" />
                            </svg>
                          </div>
                        </div>
                      </div>
                    </ng-container>
                    <ng-template #staticEventRow>
                      <div class="flex-row flex pt-3 gap-1">
                        <img height="105" width="200" class="rounded-md" [src]="icon.thumbnail" alt="thumbnail" />
                      </div>
                    </ng-template>
                    <div class="flex w-full justify-center" *ngIf="icon.thumbnail === null || undefined">
                      <svg width="196" height="104" viewBox="0 0 196 104" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_2908_10933)">
                          <rect width="196" height="104" fill="#EEEEEE" />
                          <mask id="mask0_2908_10933" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="86" y="40" width="24" height="24">
                            <rect x="86" y="40" width="24" height="24" fill="#D9D9D9" />
                          </mask>
                          <g mask="url(#mask0_2908_10933)">
                            <path d="M98.2969 56.5527C98.5257 56.5527 98.7175 56.4753 98.8723 56.3205C99.0271 56.1657 99.1045 55.9739 99.1045 55.7451C99.1045 55.5162 99.0271 55.3244 98.8723 55.1696C98.7175 55.0148 98.5257 54.9374 98.2969 54.9374C98.068 54.9374 97.8762 55.0148 97.7214 55.1696C97.5666 55.3244 97.4892 55.5162 97.4892 55.7451C97.4892 55.9739 97.5666 56.1657 97.7214 56.3205C97.8762 56.4753 98.068 56.5527 98.2969 56.5527ZM98.2972 52.8989C98.5098 52.8989 98.6879 52.827 98.8315 52.6833C98.975 52.5396 99.0468 52.3614 99.0468 52.1489V47.6489C99.0468 47.4364 98.9749 47.2583 98.8311 47.1145C98.6873 46.9708 98.5091 46.8989 98.2965 46.8989C98.0839 46.8989 97.9058 46.9708 97.7623 47.1145C97.6187 47.2583 97.5469 47.4364 97.5469 47.6489V52.1489C97.5469 52.3614 97.6188 52.5396 97.7626 52.6833C97.9064 52.827 98.0846 52.8989 98.2972 52.8989ZM98.2985 61.322C96.9846 61.322 95.7496 61.0726 94.5934 60.574C93.4373 60.0753 92.4316 59.3986 91.5764 58.5437C90.7211 57.6889 90.0441 56.6836 89.5452 55.528C89.0463 54.3724 88.7969 53.1376 88.7969 51.8237C88.7969 50.5097 89.0462 49.2747 89.5449 48.1186C90.0435 46.9624 90.7203 45.9567 91.5751 45.1015C92.43 44.2463 93.4352 43.5692 94.5909 43.0703C95.7465 42.5715 96.9812 42.322 98.2952 42.322C99.6091 42.322 100.844 42.5714 102 43.07C103.156 43.5687 104.162 44.2454 105.017 45.1003C105.873 45.9551 106.55 46.9604 107.049 48.116C107.547 49.2716 107.797 50.5064 107.797 51.8203C107.797 53.1343 107.547 54.3693 107.049 55.5254C106.55 56.6816 105.873 57.6873 105.019 58.5425C104.164 59.3977 103.158 60.0748 102.003 60.5736C100.847 61.0725 99.6125 61.322 98.2985 61.322ZM98.2969 59.822C100.53 59.822 102.422 59.047 103.972 57.497C105.522 55.947 106.297 54.0553 106.297 51.822C106.297 49.5887 105.522 47.697 103.972 46.147C102.422 44.597 100.53 43.822 98.2969 43.822C96.0635 43.822 94.1719 44.597 92.6219 46.147C91.0719 47.697 90.2969 49.5887 90.2969 51.822C90.2969 54.0553 91.0719 55.947 92.6219 57.497C94.1719 59.047 96.0635 59.822 98.2969 59.822Z" fill="#212121" />
                          </g>
                          <path d="M49.0232 68.03L46.3932 75H45.3432L42.7132 68.03H43.6832L45.8732 74.04L48.0632 68.03H49.0232ZM50.491 68.63C50.3176 68.63 50.171 68.57 50.051 68.45C49.931 68.33 49.871 68.1833 49.871 68.01C49.871 67.8367 49.931 67.69 50.051 67.57C50.171 67.45 50.3176 67.39 50.491 67.39C50.6576 67.39 50.7976 67.45 50.911 67.57C51.031 67.69 51.091 67.8367 51.091 68.01C51.091 68.1833 51.031 68.33 50.911 68.45C50.7976 68.57 50.6576 68.63 50.491 68.63ZM50.931 69.52V75H50.021V69.52H50.931ZM52.1419 72.24C52.1419 71.68 52.2552 71.19 52.4819 70.77C52.7086 70.3433 53.0186 70.0133 53.4119 69.78C53.8119 69.5467 54.2586 69.43 54.7519 69.43C55.1786 69.43 55.5752 69.53 55.9419 69.73C56.3086 69.9233 56.5886 70.18 56.7819 70.5V67.6H57.7019V75H56.7819V73.97C56.6019 74.2967 56.3352 74.5667 55.9819 74.78C55.6286 74.9867 55.2152 75.09 54.7419 75.09C54.2552 75.09 53.8119 74.97 53.4119 74.73C53.0186 74.49 52.7086 74.1533 52.4819 73.72C52.2552 73.2867 52.1419 72.7933 52.1419 72.24ZM56.7819 72.25C56.7819 71.8367 56.6986 71.4767 56.5319 71.17C56.3652 70.8633 56.1386 70.63 55.8519 70.47C55.5719 70.3033 55.2619 70.22 54.9219 70.22C54.5819 70.22 54.2719 70.3 53.9919 70.46C53.7119 70.62 53.4886 70.8533 53.3219 71.16C53.1552 71.4667 53.0719 71.8267 53.0719 72.24C53.0719 72.66 53.1552 73.0267 53.3219 73.34C53.4886 73.6467 53.7119 73.8833 53.9919 74.05C54.2719 74.21 54.5819 74.29 54.9219 74.29C55.2619 74.29 55.5719 74.21 55.8519 74.05C56.1386 73.8833 56.3652 73.6467 56.5319 73.34C56.6986 73.0267 56.7819 72.6633 56.7819 72.25ZM64.2397 72.05C64.2397 72.2233 64.2297 72.4067 64.2097 72.6H59.8297C59.8631 73.14 60.0464 73.5633 60.3797 73.87C60.7197 74.17 61.1297 74.32 61.6097 74.32C62.0031 74.32 62.3297 74.23 62.5897 74.05C62.8564 73.8633 63.0431 73.6167 63.1497 73.31H64.1297C63.9831 73.8367 63.6897 74.2667 63.2497 74.6C62.8097 74.9267 62.2631 75.09 61.6097 75.09C61.0897 75.09 60.6231 74.9733 60.2097 74.74C59.8031 74.5067 59.4831 74.1767 59.2497 73.75C59.0164 73.3167 58.8997 72.8167 58.8997 72.25C58.8997 71.6833 59.0131 71.1867 59.2397 70.76C59.4664 70.3333 59.7831 70.0067 60.1897 69.78C60.6031 69.5467 61.0764 69.43 61.6097 69.43C62.1297 69.43 62.5897 69.5433 62.9897 69.77C63.3897 69.9967 63.6964 70.31 63.9097 70.71C64.1297 71.1033 64.2397 71.55 64.2397 72.05ZM63.2997 71.86C63.2997 71.5133 63.2231 71.2167 63.0697 70.97C62.9164 70.7167 62.7064 70.5267 62.4397 70.4C62.1797 70.2667 61.8897 70.2 61.5697 70.2C61.1097 70.2 60.7164 70.3467 60.3897 70.64C60.0697 70.9333 59.8864 71.34 59.8397 71.86H63.2997ZM67.8309 75.09C67.3176 75.09 66.8509 74.9733 66.4309 74.74C66.0176 74.5067 65.6909 74.1767 65.4509 73.75C65.2176 73.3167 65.1009 72.8167 65.1009 72.25C65.1009 71.69 65.2209 71.1967 65.4609 70.77C65.7076 70.3367 66.0409 70.0067 66.4609 69.78C66.8809 69.5467 67.3509 69.43 67.8709 69.43C68.3909 69.43 68.8609 69.5467 69.2809 69.78C69.7009 70.0067 70.0309 70.3333 70.2709 70.76C70.5176 71.1867 70.6409 71.6833 70.6409 72.25C70.6409 72.8167 70.5142 73.3167 70.2609 73.75C70.0142 74.1767 69.6776 74.5067 69.2509 74.74C68.8242 74.9733 68.3509 75.09 67.8309 75.09ZM67.8309 74.29C68.1576 74.29 68.4642 74.2133 68.7509 74.06C69.0376 73.9067 69.2676 73.6767 69.4409 73.37C69.6209 73.0633 69.7109 72.69 69.7109 72.25C69.7109 71.81 69.6242 71.4367 69.4509 71.13C69.2776 70.8233 69.0509 70.5967 68.7709 70.45C68.4909 70.2967 68.1876 70.22 67.8609 70.22C67.5276 70.22 67.2209 70.2967 66.9409 70.45C66.6676 70.5967 66.4476 70.8233 66.2809 71.13C66.1142 71.4367 66.0309 71.81 66.0309 72.25C66.0309 72.6967 66.1109 73.0733 66.2709 73.38C66.4376 73.6867 66.6576 73.9167 66.9309 74.07C67.2042 74.2167 67.5042 74.29 67.8309 74.29ZM74.9734 68.63C74.8001 68.63 74.6534 68.57 74.5334 68.45C74.4134 68.33 74.3534 68.1833 74.3534 68.01C74.3534 67.8367 74.4134 67.69 74.5334 67.57C74.6534 67.45 74.8001 67.39 74.9734 67.39C75.1401 67.39 75.2801 67.45 75.3934 67.57C75.5134 67.69 75.5734 67.8367 75.5734 68.01C75.5734 68.1833 75.5134 68.33 75.3934 68.45C75.2801 68.57 75.1401 68.63 74.9734 68.63ZM75.4134 69.52V75H74.5034V69.52H75.4134ZM78.9043 75.09C78.4843 75.09 78.1077 75.02 77.7743 74.88C77.441 74.7333 77.1777 74.5333 76.9843 74.28C76.791 74.02 76.6843 73.7233 76.6643 73.39H77.6043C77.631 73.6633 77.7577 73.8867 77.9843 74.06C78.2177 74.2333 78.521 74.32 78.8943 74.32C79.241 74.32 79.5143 74.2433 79.7143 74.09C79.9143 73.9367 80.0143 73.7433 80.0143 73.51C80.0143 73.27 79.9077 73.0933 79.6943 72.98C79.481 72.86 79.151 72.7433 78.7043 72.63C78.2977 72.5233 77.9643 72.4167 77.7043 72.31C77.451 72.1967 77.231 72.0333 77.0443 71.82C76.8643 71.6 76.7743 71.3133 76.7743 70.96C76.7743 70.68 76.8577 70.4233 77.0243 70.19C77.191 69.9567 77.4277 69.7733 77.7343 69.64C78.041 69.5 78.391 69.43 78.7843 69.43C79.391 69.43 79.881 69.5833 80.2543 69.89C80.6277 70.1967 80.8277 70.6167 80.8543 71.15H79.9443C79.9243 70.8633 79.8077 70.6333 79.5943 70.46C79.3877 70.2867 79.1077 70.2 78.7543 70.2C78.4277 70.2 78.1677 70.27 77.9743 70.41C77.781 70.55 77.6843 70.7333 77.6843 70.96C77.6843 71.14 77.741 71.29 77.8543 71.41C77.9743 71.5233 78.121 71.6167 78.2943 71.69C78.4743 71.7567 78.721 71.8333 79.0343 71.92C79.4277 72.0267 79.7477 72.1333 79.9943 72.24C80.241 72.34 80.451 72.4933 80.6243 72.7C80.8043 72.9067 80.8977 73.1767 80.9043 73.51C80.9043 73.81 80.821 74.08 80.6543 74.32C80.4877 74.56 80.251 74.75 79.9443 74.89C79.6443 75.0233 79.2977 75.09 78.9043 75.09ZM87.525 69.42C88.1916 69.42 88.7316 69.6233 89.145 70.03C89.5583 70.43 89.765 71.01 89.765 71.77V75H88.865V71.9C88.865 71.3533 88.7283 70.9367 88.455 70.65C88.1816 70.3567 87.8083 70.21 87.335 70.21C86.855 70.21 86.4716 70.36 86.185 70.66C85.905 70.96 85.765 71.3967 85.765 71.97V75H84.855V69.52H85.765V70.3C85.945 70.02 86.1883 69.8033 86.495 69.65C86.8083 69.4967 87.1516 69.42 87.525 69.42ZM93.6414 75.09C93.1281 75.09 92.6614 74.9733 92.2414 74.74C91.8281 74.5067 91.5014 74.1767 91.2614 73.75C91.0281 73.3167 90.9114 72.8167 90.9114 72.25C90.9114 71.69 91.0314 71.1967 91.2714 70.77C91.5181 70.3367 91.8514 70.0067 92.2714 69.78C92.6914 69.5467 93.1614 69.43 93.6814 69.43C94.2014 69.43 94.6714 69.5467 95.0914 69.78C95.5114 70.0067 95.8414 70.3333 96.0814 70.76C96.3281 71.1867 96.4514 71.6833 96.4514 72.25C96.4514 72.8167 96.3248 73.3167 96.0714 73.75C95.8248 74.1767 95.4881 74.5067 95.0614 74.74C94.6348 74.9733 94.1614 75.09 93.6414 75.09ZM93.6414 74.29C93.9681 74.29 94.2748 74.2133 94.5614 74.06C94.8481 73.9067 95.0781 73.6767 95.2514 73.37C95.4314 73.0633 95.5214 72.69 95.5214 72.25C95.5214 71.81 95.4348 71.4367 95.2614 71.13C95.0881 70.8233 94.8614 70.5967 94.5814 70.45C94.3014 70.2967 93.9981 70.22 93.6714 70.22C93.3381 70.22 93.0314 70.2967 92.7514 70.45C92.4781 70.5967 92.2581 70.8233 92.0914 71.13C91.9248 71.4367 91.8414 71.81 91.8414 72.25C91.8414 72.6967 91.9214 73.0733 92.0814 73.38C92.2481 73.6867 92.4681 73.9167 92.7414 74.07C93.0148 74.2167 93.3148 74.29 93.6414 74.29ZM98.7579 70.27V73.5C98.7579 73.7667 98.8146 73.9567 98.9279 74.07C99.0413 74.1767 99.2379 74.23 99.5179 74.23H100.188V75H99.3679C98.8613 75 98.4813 74.8833 98.2279 74.65C97.9746 74.4167 97.8479 74.0333 97.8479 73.5V70.27H97.1379V69.52H97.8479V68.14H98.7579V69.52H100.188V70.27H98.7579ZM103.617 72.24C103.617 71.68 103.73 71.19 103.957 70.77C104.183 70.3433 104.493 70.0133 104.887 69.78C105.287 69.5467 105.73 69.43 106.217 69.43C106.697 69.43 107.113 69.5333 107.467 69.74C107.82 69.9467 108.083 70.2067 108.257 70.52V69.52H109.177V75H108.257V73.98C108.077 74.3 107.807 74.5667 107.447 74.78C107.093 74.9867 106.68 75.09 106.207 75.09C105.72 75.09 105.28 74.97 104.887 74.73C104.493 74.49 104.183 74.1533 103.957 73.72C103.73 73.2867 103.617 72.7933 103.617 72.24ZM108.257 72.25C108.257 71.8367 108.173 71.4767 108.007 71.17C107.84 70.8633 107.613 70.63 107.327 70.47C107.047 70.3033 106.737 70.22 106.397 70.22C106.057 70.22 105.747 70.3 105.467 70.46C105.187 70.62 104.963 70.8533 104.797 71.16C104.63 71.4667 104.547 71.8267 104.547 72.24C104.547 72.66 104.63 73.0267 104.797 73.34C104.963 73.6467 105.187 73.8833 105.467 74.05C105.747 74.21 106.057 74.29 106.397 74.29C106.737 74.29 107.047 74.21 107.327 74.05C107.613 73.8833 107.84 73.6467 108.007 73.34C108.173 73.0267 108.257 72.6633 108.257 72.25ZM112.754 74.16L114.454 69.52H115.424L113.274 75H112.214L110.064 69.52H111.044L112.754 74.16ZM115.98 72.24C115.98 71.68 116.093 71.19 116.32 70.77C116.546 70.3433 116.856 70.0133 117.25 69.78C117.65 69.5467 118.093 69.43 118.58 69.43C119.06 69.43 119.476 69.5333 119.83 69.74C120.183 69.9467 120.446 70.2067 120.62 70.52V69.52H121.54V75H120.62V73.98C120.44 74.3 120.17 74.5667 119.81 74.78C119.456 74.9867 119.043 75.09 118.57 75.09C118.083 75.09 117.643 74.97 117.25 74.73C116.856 74.49 116.546 74.1533 116.32 73.72C116.093 73.2867 115.98 72.7933 115.98 72.24ZM120.62 72.25C120.62 71.8367 120.536 71.4767 120.37 71.17C120.203 70.8633 119.976 70.63 119.69 70.47C119.41 70.3033 119.1 70.22 118.76 70.22C118.42 70.22 118.11 70.3 117.83 70.46C117.55 70.62 117.326 70.8533 117.16 71.16C116.993 71.4667 116.91 71.8267 116.91 72.24C116.91 72.66 116.993 73.0267 117.16 73.34C117.326 73.6467 117.55 73.8833 117.83 74.05C118.11 74.21 118.42 74.29 118.76 74.29C119.1 74.29 119.41 74.21 119.69 74.05C119.976 73.8833 120.203 73.6467 120.37 73.34C120.536 73.0267 120.62 72.6633 120.62 72.25ZM123.548 68.63C123.374 68.63 123.228 68.57 123.108 68.45C122.988 68.33 122.928 68.1833 122.928 68.01C122.928 67.8367 122.988 67.69 123.108 67.57C123.228 67.45 123.374 67.39 123.548 67.39C123.714 67.39 123.854 67.45 123.968 67.57C124.088 67.69 124.148 67.8367 124.148 68.01C124.148 68.1833 124.088 68.33 123.968 68.45C123.854 68.57 123.714 68.63 123.548 68.63ZM123.988 69.52V75H123.078V69.52H123.988ZM126.449 67.6V75H125.539V67.6H126.449ZM127.659 72.24C127.659 71.68 127.773 71.19 127.999 70.77C128.226 70.3433 128.536 70.0133 128.929 69.78C129.329 69.5467 129.773 69.43 130.259 69.43C130.739 69.43 131.156 69.5333 131.509 69.74C131.863 69.9467 132.126 70.2067 132.299 70.52V69.52H133.219V75H132.299V73.98C132.119 74.3 131.849 74.5667 131.489 74.78C131.136 74.9867 130.723 75.09 130.249 75.09C129.763 75.09 129.323 74.97 128.929 74.73C128.536 74.49 128.226 74.1533 127.999 73.72C127.773 73.2867 127.659 72.7933 127.659 72.24ZM132.299 72.25C132.299 71.8367 132.216 71.4767 132.049 71.17C131.883 70.8633 131.656 70.63 131.369 70.47C131.089 70.3033 130.779 70.22 130.439 70.22C130.099 70.22 129.789 70.3 129.509 70.46C129.229 70.62 129.006 70.8533 128.839 71.16C128.673 71.4667 128.589 71.8267 128.589 72.24C128.589 72.66 128.673 73.0267 128.839 73.34C129.006 73.6467 129.229 73.8833 129.509 74.05C129.789 74.21 130.099 74.29 130.439 74.29C130.779 74.29 131.089 74.21 131.369 74.05C131.656 73.8833 131.883 73.6467 132.049 73.34C132.216 73.0267 132.299 72.6633 132.299 72.25ZM135.667 70.54C135.854 70.2133 136.127 69.9467 136.487 69.74C136.847 69.5333 137.257 69.43 137.717 69.43C138.211 69.43 138.654 69.5467 139.047 69.78C139.441 70.0133 139.751 70.3433 139.977 70.77C140.204 71.19 140.317 71.68 140.317 72.24C140.317 72.7933 140.204 73.2867 139.977 73.72C139.751 74.1533 139.437 74.49 139.037 74.73C138.644 74.97 138.204 75.09 137.717 75.09C137.244 75.09 136.827 74.9867 136.467 74.78C136.114 74.5733 135.847 74.31 135.667 73.99V75H134.757V67.6H135.667V70.54ZM139.387 72.24C139.387 71.8267 139.304 71.4667 139.137 71.16C138.971 70.8533 138.744 70.62 138.457 70.46C138.177 70.3 137.867 70.22 137.527 70.22C137.194 70.22 136.884 70.3033 136.597 70.47C136.317 70.63 136.091 70.8667 135.917 71.18C135.751 71.4867 135.667 71.8433 135.667 72.25C135.667 72.6633 135.751 73.0267 135.917 73.34C136.091 73.6467 136.317 73.8833 136.597 74.05C136.884 74.21 137.194 74.29 137.527 74.29C137.867 74.29 138.177 74.21 138.457 74.05C138.744 73.8833 138.971 73.6467 139.137 73.34C139.304 73.0267 139.387 72.66 139.387 72.24ZM142.425 67.6V75H141.515V67.6H142.425ZM148.976 72.05C148.976 72.2233 148.966 72.4067 148.946 72.6H144.566C144.599 73.14 144.783 73.5633 145.116 73.87C145.456 74.17 145.866 74.32 146.346 74.32C146.739 74.32 147.066 74.23 147.326 74.05C147.593 73.8633 147.779 73.6167 147.886 73.31H148.866C148.719 73.8367 148.426 74.2667 147.986 74.6C147.546 74.9267 146.999 75.09 146.346 75.09C145.826 75.09 145.359 74.9733 144.946 74.74C144.539 74.5067 144.219 74.1767 143.986 73.75C143.753 73.3167 143.636 72.8167 143.636 72.25C143.636 71.6833 143.749 71.1867 143.976 70.76C144.203 70.3333 144.519 70.0067 144.926 69.78C145.339 69.5467 145.813 69.43 146.346 69.43C146.866 69.43 147.326 69.5433 147.726 69.77C148.126 69.9967 148.433 70.31 148.646 70.71C148.866 71.1033 148.976 71.55 148.976 72.05ZM148.036 71.86C148.036 71.5133 147.959 71.2167 147.806 70.97C147.653 70.7167 147.443 70.5267 147.176 70.4C146.916 70.2667 146.626 70.2 146.306 70.2C145.846 70.2 145.453 70.3467 145.126 70.64C144.806 70.9333 144.623 71.34 144.576 71.86H148.036ZM150.467 75.06C150.294 75.06 150.147 75 150.027 74.88C149.907 74.76 149.847 74.6133 149.847 74.44C149.847 74.2667 149.907 74.12 150.027 74C150.147 73.88 150.294 73.82 150.467 73.82C150.634 73.82 150.774 73.88 150.887 74C151.007 74.12 151.067 74.2667 151.067 74.44C151.067 74.6133 151.007 74.76 150.887 74.88C150.774 75 150.634 75.06 150.467 75.06Z" fill="#1C1B1B" />
                        </g>
                        <defs>
                          <clipPath id="clip0_2908_10933">
                            <rect width="196" height="104" rx="8" fill="white" />
                          </clipPath>
                        </defs>
                      </svg>
                    </div>

                    <div class="flex-row flex pt-3 gap-1">
                      <div class="absolute left-0 top-0 bottom-3 w-1 bg-main-primary scale-y-0 group-hover/item:scale-y-100 transition-transform duration-200"></div>
                      <img [src]="icon.eventIcon" class="w-6 h-6 transition-transform duration-200 group-hover/item:scale-110" [alt]="icon.eventName" />
                      <div class="flex flex-col flex-grow">
                        <span class="text-sm font-medium group-hover/item:text-main-primary transition-colors duration-200">
                          {{ icon.eventName }}
                        </span>
                      </div>
                    </div>
                    <div class="flex flex-col gap-2">
                      <div class="flex flex-row gap-1 items-center">
                        <span>
                          <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <mask id="mask0_2440_4657" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="18" height="19">
                              <rect y="0.5" width="18" height="18" fill="#D9D9D9" />
                            </mask>
                            <g mask="url(#mask0_2440_4657)">
                              <path d="M7.95281 12.0097C8.21919 12.2759 8.56225 12.4024 8.982 12.389C9.40163 12.3755 9.70956 12.2241 9.90581 11.9347L12.9308 7.553C13.0381 7.39137 13.0259 7.24469 12.8942 7.11294C12.7624 6.98131 12.6156 6.96906 12.4538 7.07619L8.06531 10.0942C7.77119 10.2904 7.61231 10.5921 7.58869 10.9992C7.56519 11.4065 7.68656 11.7433 7.95281 12.0097ZM9 3.875C9.49325 3.875 9.96463 3.91975 10.4141 4.00925C10.8638 4.09862 11.302 4.23656 11.7289 4.42306C11.8808 4.48369 12.0319 4.59187 12.1824 4.74762C12.3329 4.90337 12.3714 5.05094 12.2978 5.19031C12.2243 5.32981 12.0654 5.42238 11.8211 5.468C11.5769 5.51375 11.375 5.50631 11.2155 5.44569C10.8645 5.29469 10.5068 5.18269 10.1423 5.10969C9.77788 5.03656 9.39713 5 9 5C7.3375 5 5.92188 5.58438 4.75313 6.75313C3.58438 7.92188 3 9.3375 3 11C3 11.525 3.07188 12.0437 3.21563 12.5562C3.35938 13.0687 3.5625 13.55 3.825 14H14.175C14.4625 13.525 14.6719 13.0312 14.8031 12.5188C14.9344 12.0063 15 11.475 15 10.925C15 10.5711 14.9647 10.2079 14.8941 9.83525C14.8233 9.46275 14.7124 9.10481 14.5614 8.76144C14.5009 8.60194 14.4884 8.44619 14.5239 8.29419C14.5596 8.14231 14.6437 8.0165 14.7763 7.91675C14.8994 7.82612 15.0339 7.801 15.1796 7.84137C15.3253 7.88175 15.4284 7.97019 15.489 8.10669C15.7053 8.57781 15.8634 9.0415 15.9634 9.49775C16.0634 9.954 16.1173 10.4221 16.125 10.9019C16.1326 11.5808 16.0562 12.2224 15.8957 12.8266C15.7351 13.431 15.4933 14.0221 15.1703 14.6C15.0711 14.7625 14.9317 14.8906 14.7519 14.9844C14.5721 15.0781 14.3798 15.125 14.175 15.125H3.825C3.625 15.125 3.43631 15.0769 3.25894 14.9808C3.08156 14.8846 2.9385 14.748 2.82975 14.5711C2.54325 14.0711 2.3125 13.5259 2.1375 12.9356C1.9625 12.3452 1.875 11.7 1.875 11C1.875 10.0202 2.06088 9.09919 2.43263 8.23681C2.80438 7.37444 3.31181 6.61913 3.95494 5.97088C4.59819 5.32263 5.35438 4.81125 6.2235 4.43675C7.09275 4.06225 8.01825 3.875 9 3.875Z" fill="#1C1B1F" />
                            </g>
                          </svg>
                        </span>
                        <span class="text-sm">Speed: <span>36 MPH</span></span>
                      </div>
                      <div class="flex flex-row gap-1 items-center">
                        <span>
                          <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <mask id="mask0_2440_4664" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="18" height="19">
                              <rect y="0.5" width="18" height="18" fill="#D9D9D9" />
                            </mask>
                            <g mask="url(#mask0_2440_4664)">
                              <path d="M9.00002 4.40862C8.84052 4.40862 8.70696 4.35475 8.59934 4.247C8.49159 4.13912 8.43771 4.0055 8.43771 3.84612V2.20193C8.43771 2.04256 8.49165 1.909 8.59952 1.80125C8.7074 1.69337 8.84102 1.63943 9.0004 1.63943C9.1599 1.63943 9.29346 1.69337 9.40109 1.80125C9.50884 1.909 9.56271 2.04256 9.56271 2.20193V3.84612C9.56271 4.0055 9.50877 4.13912 9.4009 4.247C9.29302 4.35475 9.1594 4.40862 9.00002 4.40862ZM12.5974 5.90281C12.4935 5.79906 12.4428 5.6705 12.4451 5.51712C12.4475 5.36375 12.5006 5.22887 12.6045 5.1125L13.7483 3.94287C13.8611 3.8265 13.9951 3.76831 14.1503 3.76831C14.3054 3.76831 14.4416 3.827 14.559 3.94437C14.6666 4.052 14.7205 4.18318 14.7205 4.33793C14.7205 4.49281 14.6661 4.62456 14.5573 4.73319L13.3877 5.90281C13.2791 6.01156 13.1473 6.06593 12.9925 6.06593C12.8377 6.06593 12.706 6.01156 12.5974 5.90281ZM14.6541 10.0625C14.4947 10.0625 14.3611 10.0086 14.2532 9.90069C14.1455 9.79281 14.0916 9.65919 14.0916 9.49981C14.0916 9.34031 14.1455 9.20675 14.2532 9.09912C14.3611 8.99137 14.4947 8.9375 14.6541 8.9375H16.2983C16.4576 8.9375 16.5912 8.99144 16.699 9.09931C16.8068 9.20719 16.8608 9.34081 16.8608 9.50019C16.8608 9.65969 16.8068 9.79325 16.699 9.90087C16.5912 10.0086 16.4576 10.0625 16.2983 10.0625H14.6541ZM9.00002 17.3606C8.84052 17.3606 8.70696 17.3066 8.59934 17.1987C8.49159 17.091 8.43771 16.9574 8.43771 16.7981V15.161C8.43771 15.0016 8.49165 14.8681 8.59952 14.7603C8.7074 14.6524 8.84102 14.5985 9.0004 14.5985C9.1599 14.5985 9.29346 14.6524 9.40109 14.7603C9.50884 14.8681 9.56271 15.0016 9.56271 15.161V16.7981C9.56271 16.9574 9.50877 17.091 9.4009 17.1987C9.29302 17.3066 9.1594 17.3606 9.00002 17.3606ZM4.62002 5.90281L3.44309 4.75194C3.32671 4.63956 3.26852 4.50375 3.26852 4.3445C3.26852 4.18537 3.32671 4.0515 3.44309 3.94287C3.55171 3.839 3.68502 3.78706 3.84302 3.78706C4.00102 3.78706 4.13115 3.839 4.2334 3.94287L5.41034 5.11981C5.51421 5.22206 5.56615 5.35219 5.56615 5.51019C5.56615 5.66819 5.51471 5.79906 5.41184 5.90281C5.29959 6.00669 5.16865 6.05862 5.01902 6.05862C4.86927 6.05862 4.73627 6.00669 4.62002 5.90281ZM13.7556 15.0571L12.6045 13.8875C12.5006 13.7711 12.4475 13.6362 12.4451 13.4829C12.4428 13.3295 12.493 13.2009 12.5959 13.0972C12.6988 12.9933 12.8274 12.9414 12.9818 12.9414C13.136 12.9414 13.2713 12.9957 13.3877 13.1043L14.5573 14.2554C14.669 14.3591 14.7228 14.4896 14.719 14.6469C14.7151 14.8041 14.6605 14.9409 14.5553 15.0571C14.4404 15.1735 14.304 15.2317 14.146 15.2317C13.9878 15.2317 13.8577 15.1735 13.7556 15.0571ZM1.70215 10.0625C1.54277 10.0625 1.40921 10.0086 1.30146 9.90069C1.19359 9.79281 1.13965 9.65919 1.13965 9.49981C1.13965 9.34031 1.19359 9.20675 1.30146 9.09912C1.40921 8.99137 1.54277 8.9375 1.70215 8.9375H3.34634C3.50571 8.9375 3.63934 8.99144 3.74721 9.09931C3.85496 9.20719 3.90884 9.34081 3.90884 9.50019C3.90884 9.65969 3.85496 9.79325 3.74721 9.90087C3.63934 10.0086 3.50571 10.0625 3.34634 10.0625H1.70215ZM3.45021 15.0571C3.34634 14.9485 3.29321 14.8156 3.29084 14.6583C3.28846 14.5012 3.33921 14.3707 3.44309 14.2668L4.60559 13.1043C4.71421 12.9957 4.84402 12.9414 4.99502 12.9414C5.1459 12.9414 5.27952 12.9952 5.3959 13.1028C5.51227 13.2202 5.57046 13.3556 5.57046 13.5089C5.57046 13.6623 5.51227 13.7971 5.3959 13.9134L4.25215 15.0571C4.13577 15.1735 3.99859 15.2317 3.84059 15.2317C3.68259 15.2317 3.55246 15.1735 3.45021 15.0571ZM9.0019 13.625C7.85652 13.625 6.8824 13.2241 6.07952 12.4224C5.27665 11.6206 4.87521 10.6471 4.87521 9.50169C4.87521 8.35631 5.27609 7.38218 6.07784 6.57931C6.87959 5.77643 7.85315 5.375 8.99852 5.375C10.1439 5.375 11.118 5.77587 11.9209 6.57762C12.7238 7.37937 13.1252 8.35293 13.1252 9.49831C13.1252 10.6437 12.7243 11.6178 11.9226 12.4207C11.1208 13.2236 10.1473 13.625 9.0019 13.625ZM9.00021 12.5C9.82521 12.5 10.5315 12.2062 11.119 11.6187C11.7065 11.0312 12.0002 10.325 12.0002 9.5C12.0002 8.675 11.7065 7.96875 11.119 7.38125C10.5315 6.79375 9.82521 6.5 9.00021 6.5C8.17521 6.5 7.46896 6.79375 6.88146 7.38125C6.29396 7.96875 6.00021 8.675 6.00021 9.5C6.00021 10.325 6.29396 11.0312 6.88146 11.6187C7.46896 12.2062 8.17521 12.5 9.00021 12.5Z" fill="#1C1B1B" />
                            </g>
                          </svg>
                        </span>
                        <span class="text-sm">Temperature: <span>5.6Â°C</span></span>
                      </div>
                      <div class="flex">
                        <span class="inline-block bg-[#f5be1833] py-1 px-1.5 text-xs">Review required</span>
                      </div>
                    </div>
                  </div>
                  <div class="flex gap-1"></div>
                </div>
              </div>
              <div class="sticky bottom-0 p-2 border-t border-platinum bg-white">
                <button class="w-full py-2 px-4 text-sm font-medium text-dim-gray hover:text-main-primary hover:bg-gray-50 rounded-md transition-colors duration-200 flex items-center justify-center gap-2" (click)="showAllEvents($event)">
                  <span>Show all</span>
                  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 4l6 8-6 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </button>
              </div>
            </div>
          </ng-template>
        </div>
      </ng-container>
    </div>
  </ng-container>

  <ng-template #noDataTemplate>
    <div class="relative h-28">
      <div class="absolute top-1/2 translate-y-[-50%] h-[1px] min-w-full bg-platinum" [style.width]="(timelinePixelWidth$ | async) + 'px'"></div>
      <div class="absolute top-0 left-0 right-0 bottom-0 flex items-center justify-center">
        <div class="text-dim-gray text-sm bg-white px-4 py-2 rounded-md border border-platinum z-10">No data available</div>
      </div>
    </div>
  </ng-template>

  <div *ngIf="positionX$ | async as positionX" class="absolute top-8 bottom-0 transition-all duration-300 ease-in-out" [style.left]="positionX + 'px'">
    <p class="translate-x-[-50%] translate-y-[-200%] text-xs bg-white">
      {{ positionDate$ | async | dateFormat : 'jsDate' : 'shortTimeFormat' }}
    </p>
    <div class="absolute top-0 bottom-0 translate-x-[-50%] w-[1px] z-20 bg-extra-one"></div>
    <div class="absolute top-0 translate-y-[-50%] translate-x-[-50%] w-2 h-2 rounded-full bg-extra-one"></div>
  </div>

  <div *ngIf="markerPositionX$ | async as markerX" class="absolute top-8 bottom-0 transition-[left] duration-300" [style.left]="markerX + 'px'">
    <p *ngIf="markerPositionDate$ | async as markerDate" class="translate-x-[-50%] translate-y-[-200%] text-xs bg-white">
      {{ markerDate | dateFormat : 'jsDate' : 'shortTimeFormat' }}
    </p>
    <div class="absolute top-0 bottom-0 translate-x-[-50%] w-[1px] z-20 bg-extra-one"></div>
    <div class="absolute top-0 translate-y-[-50%] translate-x-[-50%] w-2 h-2 rounded-full bg-extra-one"></div>
  </div>

  <div *ngIf="scrubberX$ | async as scrubberX" class="absolute top-8 bottom-0 transition-[left] duration-300 pointer-events-none" [style.left]="scrubberX + 'px'">
    <p class="translate-x-[-50%] translate-y-[-200%] text-xs bg-white">
      {{ scrubberDate$ | async | dateFormat : 'jsDate' : 'shortTimeFormat' }}
    </p>
    <div class="absolute top-0 bottom-0 translate-x-[-50%] w-[1px] z-20 bg-main-primary"></div>
    <div class="absolute top-0 translate-y-[-50%] translate-x-[-50%] w-2 h-2 rounded-full bg-main-primary"></div>
  </div>
</div>

<div *ngIf="showFullList" class="absolute -top-[150%] right-0 bottom-6 w-80 bg-white shadow-lg border-l border-platinum animate-in slide-in-from-right duration-200 z-[1001] flex flex-col">
  <div class="flex items-center justify-between p-4 border-b border-platinum">
    <h3 class="text-lg font-medium">All Events</h3>
    <button class="p-2 rounded-md hover:bg-gray-100 transition-colors duration-200" (click)="closeFullList()">
      <svg class="w-5 h-5 text-dim-gray" viewBox="0 0 24 24" fill="none">
        <path d="M6 18L18 6M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
      </svg>
    </button>
  </div>
  <div class="flex-grow overflow-y-auto">
    <div *ngFor="let icon of fullListIcons$ | async" class="flex items-center gap-3 p-4 border-b border-platinum transition-all duration-200 group">
      <img [src]="icon.eventIcon" class="w-6 h-6 flex-shrink-0 transition-transform duration-200 group-hover:scale-110" [alt]="icon.eventName" />
      <div class="flex flex-col min-w-0 flex-1">
        <span class="text-sm font-medium transition-colors duration-200 truncate">
          {{ icon.eventName }}
        </span>
        <span class="text-xs text-dim-gray truncate">
          {{ icon.date | dateFormat : 'jsDate' : 'shortTimeFormat' }}
        </span>
      </div>
      <div class="flex gap-1 flex-shrink-0">
        <app-button type="ternary" title="Jump to time" class="min-w-0 h-[24px]" (buttonClick)="setPositionFromAbsoluteXAndCloseList(icon.x)">
          <button class="w-full h-full flex justify-center items-center gap-1 py-0.5 px-2 rounded text-[10px] hover:bg-gray-50">Play</button>
        </app-button>

        <app-button *ngIf="icon.icon === 'event'" type="ternary" title="View details" class="min-w-0 h-[24px]" (buttonClick)="openEventDetails(icon)">
          <button class="w-full h-full flex justify-center items-center gap-1 py-0.5 px-1.5 rounded text-[9px] hover:bg-gray-50">Open</button>
        </app-button>
      </div>
    </div>
  </div>
</div>
