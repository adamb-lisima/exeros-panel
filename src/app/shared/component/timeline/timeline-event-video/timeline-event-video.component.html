<div *ngIf="event$ | async as event" class="h-[95vh] w-[90vw] overflow-y-auto flex gap-5 flex-col rounded-md bg-white">
  <div class="flex items-center px-5 pt-5 flex-shrink-0">
    <div class="flex items-center gap-2">
      <app-event-icon [eventIcon]="event.event_icon"></app-event-icon>
      <p class="font-medium text-lg">{{ event.display_name }}</p>
    </div>
    <button class="rounded-md cursor-pointer bg-anti-flash-white hover:bg-gray-200 transition-colors p-1 ml-auto" (click)="handleCloseClick()" (keydown.enter)="handleCloseClick()" tabindex="0" aria-label="Close dialog">
      <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.7279 21.2129L21.2132 12.7276" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M21.2132 21.2138L12.7279 12.7285" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </button>
  </div>
  <span class="w-full flex-[0_0_1px] bg-platinum"></span>

  <div class="p-5">
    <div class="flex flex-col gap-4">
      <div class="flex flex-row justify-between gap-2 ml-5 mr-7">
        <p class="font-normal text-lg flex flex-row items-center gap-1">
          <svg width="20" height="20" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
            <mask id="mask0_2788_2063" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="14" height="14">
              <rect width="14" height="14" fill="#D9D9D9" />
            </mask>
            <g mask="url(#mask0_2788_2063)">
              <path d="M3.09627 12.5417C2.80159 12.5417 2.55216 12.4396 2.348 12.2354C2.14383 12.0313 2.04175 11.7818 2.04175 11.4871V3.67952C2.04175 3.38484 2.14383 3.13542 2.348 2.93125C2.55216 2.72708 2.80159 2.625 3.09627 2.625H3.90389V1.83969C3.90389 1.71184 3.94672 1.60509 4.03237 1.51944C4.11803 1.43388 4.22478 1.39111 4.35262 1.39111C4.48057 1.39111 4.58732 1.43388 4.67287 1.51944C4.75853 1.60509 4.80135 1.71184 4.80135 1.83969V2.625H9.22127V1.82861C9.22127 1.70445 9.26312 1.60047 9.34683 1.51667C9.43064 1.43296 9.53462 1.39111 9.65877 1.39111C9.78292 1.39111 9.88685 1.43296 9.97056 1.51667C10.0544 1.60047 10.0963 1.70445 10.0963 1.82861V2.625H10.9039C11.1986 2.625 11.448 2.72708 11.6522 2.93125C11.8563 3.13542 11.9584 3.38484 11.9584 3.67952V11.4871C11.9584 11.7818 11.8563 12.0313 11.6522 12.2354C11.448 12.4396 11.1986 12.5417 10.9039 12.5417H3.09627ZM3.09627 11.6667H10.9039C10.9488 11.6667 10.9899 11.648 11.0273 11.6105C11.0647 11.5732 11.0834 11.5321 11.0834 11.4871V6.01286H2.91675V11.4871C2.91675 11.5321 2.93546 11.5732 2.97289 11.6105C3.01023 11.648 3.05135 11.6667 3.09627 11.6667ZM2.91675 5.13786H11.0834V3.67952C11.0834 3.63461 11.0647 3.59348 11.0273 3.55615C10.9899 3.51872 10.9488 3.5 10.9039 3.5H3.09627C3.05135 3.5 3.01023 3.51872 2.97289 3.55615C2.93546 3.59348 2.91675 3.63461 2.91675 3.67952V5.13786ZM7.00008 8.21158C6.85726 8.21158 6.73554 8.16127 6.63491 8.06065C6.53439 7.96012 6.48412 7.8384 6.48412 7.69548C6.48412 7.55266 6.53439 7.43094 6.63491 7.33031C6.73554 7.22979 6.85726 7.17952 7.00008 7.17952C7.1429 7.17952 7.26462 7.22979 7.36525 7.33031C7.46578 7.43094 7.51604 7.55266 7.51604 7.69548C7.51604 7.8384 7.46578 7.96012 7.36525 8.06065C7.26462 8.16127 7.1429 8.21158 7.00008 8.21158ZM4.66675 8.21158C4.52393 8.21158 4.40221 8.16127 4.30158 8.06065C4.20105 7.96012 4.15079 7.8384 4.15079 7.69548C4.15079 7.55266 4.20105 7.43094 4.30158 7.33031C4.40221 7.22979 4.52393 7.17952 4.66675 7.17952C4.80957 7.17952 4.93129 7.22979 5.03192 7.33031C5.13244 7.43094 5.18271 7.55266 5.18271 7.69548C5.18271 7.8384 5.13244 7.96012 5.03192 8.06065C4.93129 8.16127 4.80957 8.21158 4.66675 8.21158ZM9.33342 8.21158C9.1906 8.21158 9.06887 8.16127 8.96825 8.06065C8.86772 7.96012 8.81746 7.8384 8.81746 7.69548C8.81746 7.55266 8.86772 7.43094 8.96825 7.33031C9.06887 7.22979 9.1906 7.17952 9.33342 7.17952C9.47623 7.17952 9.59796 7.22979 9.69858 7.33031C9.79911 7.43094 9.84937 7.55266 9.84937 7.69548C9.84937 7.8384 9.79911 7.96012 9.69858 8.06065C9.59796 8.16127 9.47623 8.21158 9.33342 8.21158ZM7.00008 10.5C6.85726 10.5 6.73554 10.4497 6.63491 10.3491C6.53439 10.2485 6.48412 10.1269 6.48412 9.98404C6.48412 9.84113 6.53439 9.7194 6.63491 9.61888C6.73554 9.51825 6.85726 9.46794 7.00008 9.46794C7.1429 9.46794 7.26462 9.51825 7.36525 9.61888C7.46578 9.7194 7.51604 9.84113 7.51604 9.98404C7.51604 10.1269 7.46578 10.2485 7.36525 10.3491C7.26462 10.4497 7.1429 10.5 7.00008 10.5ZM4.66675 10.5C4.52393 10.5 4.40221 10.4497 4.30158 10.3491C4.20105 10.2485 4.15079 10.1269 4.15079 9.98404C4.15079 9.84113 4.20105 9.7194 4.30158 9.61888C4.40221 9.51825 4.52393 9.46794 4.66675 9.46794C4.80957 9.46794 4.93129 9.51825 5.03192 9.61888C5.13244 9.7194 5.18271 9.84113 5.18271 9.98404C5.18271 10.1269 5.13244 10.2485 5.03192 10.3491C4.93129 10.4497 4.80957 10.5 4.66675 10.5ZM9.33342 10.5C9.1906 10.5 9.06887 10.4497 8.96825 10.3491C8.86772 10.2485 8.81746 10.1269 8.81746 9.98404C8.81746 9.84113 8.86772 9.7194 8.96825 9.61888C9.06887 9.51825 9.1906 9.46794 9.33342 9.46794C9.47623 9.46794 9.59796 9.51825 9.69858 9.61888C9.79911 9.7194 9.84937 9.84113 9.84937 9.98404C9.84937 10.1269 9.79911 10.2485 9.69858 10.3491C9.59796 10.4497 9.47623 10.5 9.33342 10.5Z" fill="#1C1B1B" />
            </g>
          </svg>
          {{ event.occurence_start_time | dateFormat : 'serverDateTimeFormat' : 'clientDateTimeFormat' }}
        </p>

        <div class="font-normal text-lg flex flex-row items-center gap-1">
          <svg class="text-main-primary pt-1" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.99325 2.1024e-05C3.56364 0.0100417 -0.00800482 3.58742 1.34743e-05 8.00654C0.00803177 12.4337 3.59121 16.0105 8.00678 16C12.4369 15.9895 16.009 12.4111 16 7.99301C15.991 3.56337 12.4113 -0.00999964 7.99325 2.1024e-05ZM7.78578 1.60333C11.406 1.47607 14.035 4.27634 14.3352 7.18935H11.2627C11.1625 6.99445 11.0983 6.81007 10.9866 6.66076C10.8402 6.46486 10.6132 6.39471 10.3717 6.39471C8.7904 6.39471 7.20913 6.39471 5.62785 6.39471C5.17683 6.39471 4.88215 6.66527 4.80597 7.11119C4.79997 7.13744 4.79261 7.16336 4.78393 7.18885H1.67684C1.86126 4.74531 4.08734 1.7361 7.78578 1.60584V1.60333ZM7.19493 14.3471C5.92052 14.1788 4.80247 13.6888 3.83727 12.8595C2.59844 11.7933 1.8798 10.4406 1.64427 8.80719H4.79095C4.813 9.45552 5.034 10.0257 5.49255 10.4882C5.95109 10.9506 6.52089 11.1806 7.19092 11.2016L7.19493 14.3471ZM7.20345 9.59832C6.77447 9.5893 6.46876 9.30972 6.40813 8.89687C6.39902 8.82258 6.39516 8.74775 6.3966 8.67291C6.3966 8.45597 6.3966 8.23851 6.3966 8.01054H9.5934C9.5934 8.31417 9.61646 8.60828 9.58789 8.89738C9.5468 9.31323 9.22556 9.59131 8.79658 9.59882C8.26571 9.61085 7.73466 9.61151 7.20345 9.60082V9.59832ZM12.6985 12.3435C11.6496 13.4743 10.3516 14.1327 8.80861 14.3506V11.2197C10.2619 11.0694 11.0638 10.2677 11.2241 8.80769H14.3503C14.1693 10.1685 13.6236 11.3504 12.6985 12.346V12.3435Z" fill="currentColor" />
          </svg>
          <p class="font-normal text-lg">{{ event.driver_name }}</p>
        </div>

        <div class="flex gap-1">
          <div class="flex flex-row gap-1 items-center">
            <span *ngIf="!event.is_overlimit" class="mb">
              <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                <mask id="mask0_2064_16984" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="21">
                  <rect y="0.5" width="20" height="20" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_2064_16984)">
                  <path class="fill-black dark:fill-cultured" fill="currentColor" d="M8.96479 13.1602C9.22326 13.4188 9.555 13.5366 9.96 13.5135C10.3649 13.4906 10.6603 13.3451 10.8463 13.0769L14.0475 8.61084C14.1611 8.44612 14.1514 8.29723 14.0183 8.16417C13.8854 8.03126 13.7363 8.02133 13.571 8.13438L9.08979 11.3204C8.8109 11.5064 8.65569 11.7949 8.62417 12.1858C8.59264 12.577 8.70618 12.9017 8.96479 13.1602ZM10 4.66667C10.5961 4.66667 11.1506 4.72438 11.6635 4.8398C12.1763 4.95521 12.6779 5.12987 13.1683 5.36376C13.2836 5.41501 13.3835 5.49917 13.4679 5.61626C13.5524 5.7332 13.5684 5.84244 13.516 5.94396C13.4637 6.04549 13.3606 6.11223 13.2067 6.14417C13.0529 6.17625 12.9167 6.16667 12.7981 6.11542C12.3653 5.90487 11.9212 5.74966 11.4656 5.6498C11.0099 5.54994 10.5214 5.50001 10 5.50001C8.15278 5.50001 6.57986 6.14931 5.28125 7.44792C3.98264 8.74653 3.33333 10.3194 3.33333 12.1667C3.33333 12.75 3.41319 13.3264 3.57292 13.8958C3.73264 14.4653 3.95833 15 4.25 15.5H15.75C16.0694 14.9722 16.3021 14.4236 16.4479 13.8542C16.5938 13.2847 16.6667 12.6945 16.6667 12.0833C16.6667 11.6581 16.6194 11.2051 16.5248 10.7244C16.4302 10.2435 16.2777 9.78841 16.0673 9.35896C16.016 9.24035 16.0022 9.12334 16.0256 9.00792C16.0491 8.89264 16.111 8.80056 16.2113 8.73167C16.3044 8.66917 16.4052 8.65501 16.5135 8.68917C16.622 8.72334 16.7019 8.79487 16.7531 8.90376C17.0256 9.46473 17.2174 9.99869 17.3285 10.5056C17.4397 11.0126 17.4968 11.5353 17.5 12.0738C17.5032 12.7906 17.4236 13.4594 17.2613 14.0802C17.0989 14.7009 16.8462 15.327 16.5031 15.9583C16.4359 16.0695 16.3344 16.1597 16.1988 16.2292C16.0631 16.2986 15.9135 16.3333 15.75 16.3333H4.25C4.09722 16.3333 3.95569 16.296 3.82542 16.2213C3.695 16.1464 3.58549 16.0374 3.49688 15.8942C3.22118 15.4081 2.98611 14.8597 2.79167 14.2492C2.59722 13.6386 2.5 12.9445 2.5 12.1667C2.5 11.1421 2.69431 10.1751 3.08292 9.26584C3.47153 8.35639 4.00194 7.55987 4.67417 6.87626C5.34653 6.19278 6.1416 5.65362 7.05938 5.25875C7.97701 4.86403 8.95722 4.66667 10 4.66667Z" />
                </g>
              </svg>
            </span>
            <span [appTooltip]="'Vehicle is exceeding the speed limit'" class="mb" *ngIf="event.is_overlimit">
              <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                <mask id="mask0_2064_16979" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="21">
                  <rect y="0.5" width="20" height="20" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_2064_16979)">
                  <path d="M8.96479 13.1602C9.22326 13.4188 9.555 13.5366 9.96 13.5135C10.3649 13.4906 10.6603 13.3451 10.8463 13.0769L14.0475 8.61082C14.1611 8.4461 14.1514 8.29721 14.0183 8.16416C13.8854 8.03124 13.7363 8.02131 13.571 8.13437L9.08979 11.3204C8.8109 11.5064 8.65569 11.7949 8.62417 12.1858C8.59264 12.5769 8.70618 12.9017 8.96479 13.1602ZM10 4.66666C10.5961 4.66666 11.1506 4.72436 11.6635 4.83978C12.1763 4.9552 12.6779 5.12985 13.1683 5.36374C13.2836 5.41499 13.3835 5.49916 13.4679 5.61624C13.5524 5.73318 13.5684 5.84242 13.516 5.94395C13.4637 6.04548 13.3606 6.11221 13.2067 6.14416C13.0529 6.17624 12.9167 6.16666 12.7981 6.11541C12.3653 5.90485 11.9212 5.74964 11.4656 5.64978C11.0099 5.54992 10.5214 5.49999 10 5.49999C8.15278 5.49999 6.57986 6.1493 5.28125 7.44791C3.98264 8.74652 3.33333 10.3194 3.33333 12.1667C3.33333 12.75 3.41319 13.3264 3.57292 13.8958C3.73264 14.4653 3.95833 15 4.25 15.5H15.75C16.0694 14.9722 16.3021 14.4236 16.4479 13.8542C16.5938 13.2847 16.6667 12.6944 16.6667 12.0833C16.6667 11.658 16.6194 11.2051 16.5248 10.7244C16.4302 10.2435 16.2777 9.78839 16.0673 9.35895C16.016 9.24034 16.0022 9.12332 16.0256 9.00791C16.0491 8.89263 16.111 8.80055 16.2113 8.73166C16.3044 8.66916 16.4052 8.65499 16.5135 8.68916C16.622 8.72332 16.7019 8.79485 16.7531 8.90374C17.0256 9.46471 17.2174 9.99867 17.3285 10.5056C17.4397 11.0126 17.4968 11.5353 17.5 12.0737C17.5032 12.7905 17.4236 13.4594 17.2613 14.0802C17.0989 14.7009 16.8462 15.3269 16.5031 15.9583C16.4359 16.0694 16.3344 16.1597 16.1988 16.2292C16.0631 16.2986 15.9135 16.3333 15.75 16.3333H4.25C4.09722 16.3333 3.95569 16.296 3.82542 16.2212C3.695 16.1464 3.58549 16.0374 3.49688 15.8942C3.22118 15.408 2.98611 14.8597 2.79167 14.2492C2.59722 13.6386 2.5 12.9444 2.5 12.1667C2.5 11.1421 2.69431 10.1751 3.08292 9.26582C3.47153 8.35638 4.00194 7.55985 4.67417 6.87624C5.34653 6.19277 6.1416 5.6536 7.05938 5.25874C7.97701 4.86402 8.95722 4.66666 10 4.66666Z" fill="#FE3C3C" />
                </g>
              </svg>
            </span>
            <ng-container *ngIf="event.speed !== null && event.speed !== undefined">
              <p *ngIf="event.speed | unitConverter | async as speed" [ngClass]="[event.is_overlimit ? 'text-extra-two' : 'text-black']" class="text-lg leading-[14px]">{{ speed.value }} {{ speed.unit }}</p>
            </ng-container>
            <ng-container *ngIf="event.speed === null || event.speed === undefined">
              <p class="text-sm leading-[16px]">0 MPH</p>
            </ng-container>
            <ng-container *ngIf="event.speed_limit | unitConverter | async as converted">
              <div *ngIf="event.is_overlimit" class="flex w-4 h-4 p-[9px] justify-center items-center gap-1 rounded-[40px] border-2 border-[#FE3C3C] bg-white text-[11px]">{{ converted.value | number : '1.0-0' }}</div>
            </ng-container>
          </div>
        </div>
      </div>

      <app-events-core-videos></app-events-core-videos>
      <app-events-core-status *appHasPermission="[[accessGroup.EVENTS_EDITOR]]" class="exeros-fragment"></app-events-core-status>
      <app-events-core-comments *appHasPermission="[[accessGroup.EVENTS_COMMENTER, accessGroup.EVENTS_EDITOR]]" class="exeros-fragment"></app-events-core-comments>
      <app-events-core-audit-trail class="exeros-fragment"></app-events-core-audit-trail>
      <app-events-core-map class="exeros-fragment"></app-events-core-map>
      <app-events-core-speed-chart class="exeros-fragment"></app-events-core-speed-chart>
    </div>
  </div>
</div>
