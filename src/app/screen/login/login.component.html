<div *ngIf="(accessToken$ | async) === null || ((accessToken$ | async) === undefined && !this.iframeService.isIframe)">
  <header class="flex pb-4 mb-6 border-b border-neutral-200 items-center justify-center">
    <img src="assets/svg/logo-icon.svg" width="140" height="36" alt="Exeros Panel" />
  </header>

  <h2 class="text-heading-md text-neutral-800 mb-1">Welcome back</h2>
  <p class="text-body-sm text-neutral-400 mb-6">Sign in to your account</p>

  <form class="flex flex-col gap-4" [formGroup]="form" (ngSubmit)="handleFormSubmit()">
    <app-text-control
      *ngIf="showLogin"
      label="Email"
      formControlName="email"
      [error]="loginError !== null"
    ></app-text-control>

    <app-text-control
      *ngIf="showLogin"
      label="Password"
      type="password"
      formControlName="password"
      [error]="loginError !== null"
    ></app-text-control>

    <!-- Inline error message -->
    <p *ngIf="loginError" class="login-error">
      {{ loginError }}
    </p>

    <app-checkbox-control
      *ngIf="showLogin"
      label="Remember me:"
      [labelPosition]="'before'"
      formControlName="remember_me"
    ></app-checkbox-control>

    <app-text-control
      *ngIf="showCode"
      label="MFA code"
      formControlName="code"
    ></app-text-control>

    <div class="flex items-center justify-between pt-4 border-t border-neutral-200">
      <a
        *ngIf="showLogin"
        class="text-body-sm text-brand-500 hover:text-brand-600 transition-colors"
        [routerLink]="['/', ROUTE_CONST.resetPassword]"
      >Forgot password?</a>

      <app-button
        *ngIf="showCode"
        variant="secondary"
        size="md"
        (buttonClick)="handleBack()"
      >Back</app-button>

      <app-button
        variant="primary"
        size="md"
        [loading]="isLoading"
        (buttonClick)="handleFormSubmit()"
      >Login</app-button>
    </div>
  </form>
</div>
