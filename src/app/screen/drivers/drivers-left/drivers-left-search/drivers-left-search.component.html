<cdk-accordion>
  <cdk-accordion-item class="flex flex-col gap-1" #accordionItem="cdkAccordionItem" expanded>
    <div class="flex flex-col gap-1.5 p-3 rounded-xl bg-white" [ngClass]="{ hidden: !accordionItem.expanded }">
      <div class="flex justify-between items-center">
        <p class="font-semibold text-xl pb-1">Search</p>
      </div>

      <app-tree-control *ngIf="fleetOptions$ | async as options" class="w-full" label="Fleet Name" [prefixIcon]="'search'" [options]="options" [formControl]="paramsGroup.controls.fleet_id"> </app-tree-control>
      <div class="col-span-2 flex flex-col mt-[-10px]">
        <button class="group flex items-center gap-1 text-main-primary hover:bg-gray-50 px-2 rounded w-fit" (click)="isOpen = !isOpen">
          <span class="text-sm font-medium pb-1">Advanced filters</span>
          <svg class="w-3 h-3 transform transition-transform" [ngClass]="isOpen ? 'rotate-180' : ''" viewBox="0 0 24 24" fill="none">
            <path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>

        <div class="mt-1 space-y-1.5 gap-1" *ngIf="isOpen">
          <div class="grid grid-cols-2 gap-1.5 py-0.5 mb-[-15px]">
            <app-select-control *ngIf="vehicleOptions$ | async as options" label="Vehicle" [showHintSpace]="false" [clearable]="true" [multiple]="true" [options]="options" [formControl]="paramsGroup.controls.vehicle_id"> </app-select-control>
            <app-select-control *ngIf="driverOptions$ | async as driverOptions" label="Driver Name" [prefixIcon]="'search'" [clearable]="true" [options]="driverOptions" [formControl]="paramsGroup.controls.driver_id!"> </app-select-control>
          </div>
        </div>
      </div>
    </div>
  </cdk-accordion-item>
</cdk-accordion>
