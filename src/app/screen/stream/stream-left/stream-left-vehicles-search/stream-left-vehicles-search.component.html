<cdk-accordion>
  <cdk-accordion-item class="flex flex-col gap-4" #accordionItem="cdkAccordionItem" expanded>
    <div class="flex justify-between items-center">
      <h1 class="font-medium text-[32px] leading-[40px]">Play</h1>
      <div class="flex flex-row ml-auto bg-white border border-chinese-silver py-1 px-3 rounded-full h-7 cursor-pointer items-center" (click)="accordionItem.toggle()" (keydown.enter)="accordionItem.toggle()">
        <div class="text-sonic-silver transition-transform duration-300" [ngClass]="{ 'rotate-180': !accordionItem.expanded }">
          <img class="" src="assets/svg/arrow-up.svg" alt="icon" width="16" height="16" />
        </div>
        <p class="font-normal text-sm items-center">{{ accordionItem.expanded ? 'Hide' : 'Show' }} filters</p>
      </div>
    </div>
    <div class="flex flex-col bg-white rounded-xl gap-3 p-3 mb-2" [ngClass]="{ hidden: !accordionItem.expanded }">
      <div class="flex justify-between items-center">
        <p class="font-semibold text-xl">Search</p>
      </div>

      <app-tree-control *ngIf="fleetOptions$ | async as options" class="w-full" label="Fleet Name" [prefixIcon]="'search'" [options]="options" [formControl]="paramsGroup.controls.fleet_id"> </app-tree-control>
      <div class="col-span-2 flex flex-col mt-[-10px]">
        <button class="group flex items-center gap-1 text-main-primary hover:bg-gray-50 px-2 rounded w-fit" (click)="isOpen = !isOpen">
          <span class="text-sm font-medium pb-1">Advanced filters</span>
          <svg class="w-3 h-3 transform transition-transform" [ngClass]="isOpen ? 'rotate-180' : ''" viewBox="0 0 24 24" fill="none">
            <path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
        <div class="mt-1 space-y-1.5 gap-1" *ngIf="isOpen">
          <div class="grid grid-cols-2 gap-1.5 py-0.5 mb-[-15px]">
            <app-select-control *ngIf="filteredVehicleOptions$ | async as vehicleOptions" class="w-full" label="Vehicle" [prefixIcon]="'search'" [clearable]="true" [multiple]="true" [options]="vehicleOptions" [formControl]="paramsGroup.controls.vehicle_id"> </app-select-control>
            <app-select-control *ngIf="driverOptions$ | async as driverOptions" label="Driver Name" [prefixIcon]="'search'" [clearable]="true" [options]="driverOptions" [formControl]="paramsGroup.controls.driver_id!"> </app-select-control>
          </div>
        </div>
      </div>
    </div>
  </cdk-accordion-item>
</cdk-accordion>
