<div class="flex flex-col gap-5">
  <div class="flex gap-5">
    <div class="w-72 flex flex-col gap-6 p-5 border-r border-neutral-400">
      <div class="h-[500px] flex flex-col gap-2 overflow-y-auto">
        <app-button (buttonClick)="handleCreateReportClick()">
          <span class="w-48 text-sm text-white font-semibold">New automation</span>
        </app-button>
        <div class="flex items-center gap-1">
          <div class="w-5 text-brand-500">
            <svg width="6" height="4" viewBox="0 0 6 4" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M2.56327 3.10069L0.927679 1.46511C0.706698 1.24412 0.655941 0.988631 0.775408 0.698656C0.894874 0.408667 1.11222 0.263672 1.42746 0.263672H4.68852C5.00374 0.263672 5.22109 0.408667 5.34057 0.698656C5.46003 0.988631 5.40927 1.24412 5.18827 1.46511L3.5527 3.10069C3.47642 3.17697 3.39845 3.23138 3.31879 3.26392C3.23915 3.29645 3.15221 3.31272 3.05798 3.31272C2.96375 3.31272 2.87682 3.29645 2.79716 3.26392C2.71752 3.23138 2.63956 3.17697 2.56327 3.10069Z" fill="currentColor" />
            </svg>
          </div>
          <span class="text-sm text-brand-500 font-medium cursor-pointer" (click)="handleClick(undefined)" (keydown.enter)="handleClick(undefined)">All reports</span>
        </div>
        <div class="flex items-center gap-1 ml-4 cursor-pointer" (click)="handleClick('events')" (keydown.enter)="handleClick('events')">
          <div class="w-5 flex justify-center transform transition-transform" [ngClass]="active?.includes('events') ? 'rotate-90 text-brand-500' : 'text-neutral-700'">
            <svg width="4" height="5" viewBox="0 0 4 5" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.38894 4.63006C1.16794 4.85105 0.91246 4.90181 0.622485 4.78233C0.332495 4.66286 0.1875 4.44552 0.1875 4.1303V0.869218C0.1875 0.553999 0.332495 0.336657 0.622485 0.21719C0.91246 0.0977087 1.16794 0.148466 1.38894 0.369462L3.02451 2.00506C3.1008 2.08133 3.15521 2.15929 3.18774 2.23894C3.22028 2.31858 3.23655 2.40552 3.23655 2.49976C3.23655 2.594 3.22028 2.68093 3.18774 2.76057C3.15521 2.84023 3.1008 2.91819 3.02451 2.99446L1.38894 4.63006Z" fill="currentColor" />
            </svg>
          </div>
          <span class="text-sm font-medium cursor-pointer" [ngClass]="active?.includes('events') ? 'text-brand-500' : 'text-neutral-700'">EVENT reports</span>
        </div>
        <div class="ml-4 gap-2" *ngIf="active?.includes('events')">
          <div class="flex items-center ml-4 cursor-pointer" (click)="handleClick('events_active')" (keydown.enter)="handleClick('events_active')">
            <span class="text-sm font-medium cursor-pointer" [ngClass]="active === 'events_active' ? 'text-brand-500' : 'text-neutral-700'">ACTIVE</span>
          </div>
          <div class="flex items-center ml-4 cursor-pointer" (click)="handleClick('events_inactive')" (keydown.enter)="handleClick('events_inactive')">
            <span class="text-sm font-medium cursor-pointer" [ngClass]="active === 'events_inactive' ? 'text-brand-500' : 'text-neutral-700'">INACTIVE</span>
          </div>
        </div>
        <div class="flex items-center gap-1 ml-4 cursor-pointer" (click)="handleClick('distance')" (keydown.enter)="handleClick('distance')">
          <div class="w-5 flex justify-center transform transition-transform" [ngClass]="active?.includes('distance') ? 'rotate-90 text-brand-500' : 'text-neutral-700'">
            <svg width="4" height="5" viewBox="0 0 4 5" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.38894 4.63006C1.16794 4.85105 0.91246 4.90181 0.622485 4.78233C0.332495 4.66286 0.1875 4.44552 0.1875 4.1303V0.869218C0.1875 0.553999 0.332495 0.336657 0.622485 0.21719C0.91246 0.0977087 1.16794 0.148466 1.38894 0.369462L3.02451 2.00506C3.1008 2.08133 3.15521 2.15929 3.18774 2.23894C3.22028 2.31858 3.23655 2.40552 3.23655 2.49976C3.23655 2.594 3.22028 2.68093 3.18774 2.76057C3.15521 2.84023 3.1008 2.91819 3.02451 2.99446L1.38894 4.63006Z" fill="currentColor" />
            </svg>
          </div>
          <span class="text-sm font-medium cursor-pointer" [ngClass]="active?.includes('distance') ? 'text-brand-500' : 'text-neutral-700'">DISTANCE reports</span>
        </div>
        <div class="ml-4 gap-2" *ngIf="active?.includes('distance')">
          <div class="flex items-center ml-4 cursor-pointer" (click)="handleClick('distance_active')" (keydown.enter)="handleClick('distance_active')">
            <span class="text-sm font-medium cursor-pointer" [ngClass]="active === 'distance_active' ? 'text-brand-500' : 'text-neutral-700'">ACTIVE</span>
          </div>
          <div class="flex items-center ml-4 cursor-pointer" (click)="handleClick('distance_inactive')" (keydown.enter)="handleClick('distance_inactive')">
            <span class="text-sm font-medium cursor-pointer" [ngClass]="active === 'distance_inactive' ? 'text-brand-500' : 'text-neutral-700'">INACTIVE</span>
          </div>
        </div>
        <div class="flex items-center gap-1 ml-4 cursor-pointer" (click)="handleClick('driver_score')" (keydown.enter)="handleClick('driver_score')">
          <div class="w-5 flex justify-center transform transition-transform" [ngClass]="active?.includes('driver_score') ? 'rotate-90 text-brand-500' : 'text-neutral-700'">
            <svg width="4" height="5" viewBox="0 0 4 5" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.38894 4.63006C1.16794 4.85105 0.91246 4.90181 0.622485 4.78233C0.332495 4.66286 0.1875 4.44552 0.1875 4.1303V0.869218C0.1875 0.553999 0.332495 0.336657 0.622485 0.21719C0.91246 0.0977087 1.16794 0.148466 1.38894 0.369462L3.02451 2.00506C3.1008 2.08133 3.15521 2.15929 3.18774 2.23894C3.22028 2.31858 3.23655 2.40552 3.23655 2.49976C3.23655 2.594 3.22028 2.68093 3.18774 2.76057C3.15521 2.84023 3.1008 2.91819 3.02451 2.99446L1.38894 4.63006Z" fill="currentColor" />
            </svg>
          </div>
          <span class="text-sm font-medium cursor-pointer" [ngClass]="active?.includes('driver_score') ? 'text-brand-500' : 'text-neutral-700'">DRIVER SCORE reports</span>
        </div>
        <div class="ml-4 gap-2" *ngIf="active?.includes('driver_score')">
          <div class="flex items-center ml-4 cursor-pointer" (click)="handleClick('driver_score_active')" (keydown.enter)="handleClick('driver_score_active')">
            <span class="text-sm font-medium cursor-pointer" [ngClass]="active === 'driver_score_active' ? 'text-brand-500' : 'text-neutral-700'">ACTIVE</span>
          </div>
          <div class="flex items-center ml-4 cursor-pointer" (click)="handleClick('driver_score_inactive')" (keydown.enter)="handleClick('driver_score_inactive')">
            <span class="text-sm font-medium cursor-pointer" [ngClass]="active === 'driver_score_inactive' ? 'text-brand-500' : 'text-neutral-700'">INACTIVE</span>
          </div>
        </div>
      </div>
    </div>
    <div class="flex flex-col flex-1 p-5 gap-4">
      <div class="flex-1">
        <ng-container *ngIf="selectedReportId; else reportList">
          <app-settings-core-reports-selected-report class="flex-1" [report]="selectedReport$ | async" [data]="reportItemResponse$ | async" (editReport)="handleEditReportClick($event)" />
        </ng-container>
        <ng-template #reportList>
          <app-settings-core-reports-list [title]="active" [data]="reportResponse$ | async" (deleteReport)="handleDeleteReportClick($event)" (editReport)="handleEditReportClick($event)" (showReport)="handleClickSelectReport($event)"></app-settings-core-reports-list>
        </ng-template>
      </div>
      <div *ngIf="selectedReportId; else defaultPagination">
        <ng-container *ngIf="reportItemResponse$ | async as itemResponse">
          <ng-container *ngIf="perPage$ | async as perPage">
            <app-paginator *ngIf="itemResponse.meta.total_items > 0" class="flex justify-center" [info]="{ page: itemResponse.meta.current_page, perPage, totalItems: itemResponse.meta.total_items }" (pageChange)="onPageChangeSelect($event)"> </app-paginator>
          </ng-container>
        </ng-container>
      </div>
      <ng-template #defaultPagination>
        <ng-container *ngIf="reportResponse$ | async as response">
          <ng-container *ngIf="perPage$ | async as perPage">
            <app-paginator *ngIf="response.meta.total_items > 0" class="flex justify-center" [info]="{ page: response.meta.current_page, perPage, totalItems: response.meta.total_items }" (pageChange)="onPageChange($event)"> </app-paginator>
          </ng-container>
        </ng-container>
      </ng-template>
      <div *ngIf="selectedReportId">
        <div *ngIf="selectedReport$ | async as selectedReport" (click)="handleDeleteReportClick(selectedReport)" (keydown.enter)="handleDeleteReportClick(selectedReport)">
          <span class="text-sm text-brand-500 font-semibold cursor-pointer select-none">Delete report</span>
        </div>
      </div>
    </div>
  </div>
</div>
