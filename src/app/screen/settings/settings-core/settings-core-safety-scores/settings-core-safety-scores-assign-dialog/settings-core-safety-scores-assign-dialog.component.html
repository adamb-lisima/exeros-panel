<app-dialog-container title="Assign scoring">
  <div class="grid grid-cols-[1fr_minmax(0,_max-content)] auto-rows-auto gap-y-2 p-5" body>
    <span class="py-2 text-sm text-neutral-400 border-b border-neutral-400">Branch</span>
    <span class="py-2 text-sm text-neutral-400 border-b border-neutral-400">Scoring assigned</span>
    <ng-container *ngFor="let item of data.tree">
      <span class="pl-5 self-center text-sm">{{ item.label }}</span>
      <app-select-control [options]="options" [showHintSpace]="false" [formControl]="form.controls[item.value]"></app-select-control>
      <ng-container *ngIf="item.children?.length">
        <ng-container *ngTemplateOutlet="branch; context: { fleet: item.children, index: 1 }"></ng-container>
      </ng-container>
    </ng-container>
  </div>
  <div class="flex flex-1 justify-end" footer>
    <app-button [disabled]="!form.dirty" (buttonClick)="handleSaveClick()">
      <span class="text-sm text-white font-semibold">Save</span>
    </app-button>
  </div>
</app-dialog-container>

<ng-template #branch let-fleet="fleet" let-index="index">
  <ng-container *ngFor="let item of fleet">
    <span [ngStyle]="{ 'padding-left': index * 20 + 'px' }" class="self-center text-sm">{{ item.label }}</span>
    <app-select-control [options]="options" [showHintSpace]="false" [formControl]="form.controls[item.value]"></app-select-control>
    <ng-container *ngIf="item.children?.length">
      <ng-container *ngTemplateOutlet="branch; context: { fleet: item.children, index: index + 1 }"></ng-container>
    </ng-container>
  </ng-container>
</ng-template>
