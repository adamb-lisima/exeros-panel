<ng-container *ngIf="loggedInUser$ | async as loggedInUser">
  <div class="flex h-full bg-surface-base rounded-md overflow-hidden">
    <!-- Left Sidebar -->
    <nav class="flex-[0_0_240px] flex flex-col gap-1 p-4 border-r border-neutral-200 overflow-y-auto settings-sidebar" aria-label="Settings navigation">
      <ng-container *ngFor="let group of visibleSectionGroups; let isLast = last">
        <div class="flex flex-col gap-1">
          <span class="settings-sidebar__group-label">{{ group.label }}</span>
          <a
            *ngFor="let tab of group.tabs"
            class="settings-sidebar__item"
            [class.settings-sidebar__item--active]="isTabActive(tab.module)"
            (click)="handleModeClick(tab.module)"
          >
            {{ tab.label }}
          </a>
        </div>
        <span *ngIf="!isLast" class="block h-px bg-neutral-200 mx-3 my-2"></span>
      </ng-container>
    </nav>

    <!-- Right Content Area -->
    <div class="flex-1 p-6 overflow-y-auto">
      <ng-container [ngSwitch]="module">
        <app-settings-core-profile *ngSwitchCase="'profile'"></app-settings-core-profile>
        <app-settings-core-notifications *ngSwitchCase="'notifications'"></app-settings-core-notifications>
        <app-settings-core-companies *ngSwitchCase="'companies'" [user]="loggedInUser"></app-settings-core-companies>
        <app-settings-core-fleets *ngSwitchCase="'fleets'"></app-settings-core-fleets>
        <app-settings-core-roles *ngSwitchCase="'roles'"></app-settings-core-roles>
        <app-settings-core-driver *ngSwitchCase="'driver'"></app-settings-core-driver>
        <app-settings-core-event-strategies *ngSwitchCase="'event-strategies'"></app-settings-core-event-strategies>
        <app-settings-core-safety-scores *ngSwitchCase="'safety-scores'"></app-settings-core-safety-scores>
        <app-settings-core-reports *ngSwitchCase="'automated_reports'"></app-settings-core-reports>
        <app-settings-core-admin-notices *ngSwitchCase="'infotainment'"></app-settings-core-admin-notices>
        <app-settings-core-shared-clips *ngSwitchCase="'shared-clips-emails'"></app-settings-core-shared-clips>
        <app-settings-core-providers *ngSwitchCase="'providers'"></app-settings-core-providers>
        <app-settings-core-admins *ngSwitchCase="'admins'"></app-settings-core-admins>
        <app-settings-core-app-settings *ngSwitchCase="'app-settings'"></app-settings-core-app-settings>
      </ng-container>
    </div>
  </div>
</ng-container>
