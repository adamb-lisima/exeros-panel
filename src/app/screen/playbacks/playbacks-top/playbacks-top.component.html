<div class="w-full flex">
  <ng-container *ngIf="loggedInUser$ | async as loggedInUser" class="w-full flex">
    <div *ngIf="selectedId$ | async" class="w-full flex mt-2">
      <div class="gap-2 flex w-full mb-3">
        <div class="ml-auto flex flex-row gap-2">
          <app-select-control *ngIf="vehicleOptions$ | async as vehicleOptions" label="Vehicle" [options]="vehicleOptions" [formControl]="vehicleControl" [showHintSpace]="false" class="flex-1 [&_.select-container]:h-8 [&_.select-container]:px-2 [&_.select-container]:text-sm"> </app-select-control>

          <app-select-control label="Stream type" [options]="streamOptions" [formControl]="streamTypeControl" [showHintSpace]="false" class="flex-1 [&_.select-container]:h-8 [&_.select-container]:px-2 [&_.select-container]:text-sm"> </app-select-control>
          <div class="relative">
            <div class="h-[48px] w-[165px] flex items-center justify-between gap-2 p-3 rounded cursor-pointer bg-white custom-select" (click)="toggleCalendar()" (keydown.enter)="toggleCalendar()">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.66699 1.66602V4.16602" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M13.333 1.66602V4.16602" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M2.91699 7.57422H17.0837" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M17.5 7.08268V14.166C17.5 16.666 16.25 18.3327 13.3333 18.3327H6.66667C3.75 18.3327 2.5 16.666 2.5 14.166V7.08268C2.5 4.58268 3.75 2.91602 6.66667 2.91602H13.3333C16.25 2.91602 17.5 4.58268 17.5 7.08268Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M13.0788 11.4167H13.0863" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M13.0788 13.9167H13.0863" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M9.99632 11.4167H10.0038" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M9.99632 13.9167H10.0038" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M6.91185 11.4167H6.91933" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M6.91185 13.9167H6.91933" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              <p class="text-sm">{{ selectedDate?.toFormat('dd.MM.yy') || 'Select date' }}</p>
              <svg width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path opacity="0.6" d="M1 1L6.17241 5L11 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>

            <div *ngIf="isCalendarOpen" class="absolute top-full left-0 mt-1 z-50 w-[270px] flex flex-col gap-2 bg-white shadow-lg rounded-md">
              <div class="w-[270px] flex flex-col gap-2 bg-white shadow-lg" cdkMenu (click)="$event.stopPropagation()" (keydown.enter)="$event.stopPropagation()" (mousedown)="$event.stopPropagation()">
                <div class="p-3">
                  <app-calendar-mini [calendarInput]="calendarInput$ | async" (monthChange)="handleMonthChange($event)" (daySelect)="handleDaySelect($event)"> </app-calendar-mini>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>
