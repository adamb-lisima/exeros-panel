<div *ngIf="event$ | async as event" class="flex flex-col gap-4">
  <app-events-map class="h-[350px]" [event]="event" [videoCurrentTime]="null"></app-events-map>

  <div class="flex justify-between items-center">
    <div class="flex items-center gap-2">
      <svg class="text-main-primary" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.99325 2.1024e-05C3.56364 0.0100417 -0.00800482 3.58742 1.34743e-05 8.00654C0.00803177 12.4337 3.59121 16.0105 8.00678 16C12.4369 15.9895 16.009 12.4111 16 7.99301C15.991 3.56337 12.4113 -0.00999964 7.99325 2.1024e-05ZM7.78578 1.60333C11.406 1.47607 14.035 4.27634 14.3352 7.18935H11.2627C11.1625 6.99445 11.0983 6.81007 10.9866 6.66076C10.8402 6.46486 10.6132 6.39471 10.3717 6.39471C8.7904 6.39471 7.20913 6.39471 5.62785 6.39471C5.17683 6.39471 4.88215 6.66527 4.80597 7.11119C4.79997 7.13744 4.79261 7.16336 4.78393 7.18885H1.67684C1.86126 4.74531 4.08734 1.7361 7.78578 1.60584V1.60333ZM7.19493 14.3471C5.92052 14.1788 4.80247 13.6888 3.83727 12.8595C2.59844 11.7933 1.8798 10.4406 1.64427 8.80719H4.79095C4.813 9.45552 5.034 10.0257 5.49255 10.4882C5.95109 10.9506 6.52089 11.1806 7.19092 11.2016L7.19493 14.3471ZM7.20345 9.59832C6.77447 9.5893 6.46876 9.30972 6.40813 8.89687C6.39902 8.82258 6.39516 8.74775 6.3966 8.67291C6.3966 8.45597 6.3966 8.23851 6.3966 8.01054H9.5934C9.5934 8.31417 9.61646 8.60828 9.58789 8.89738C9.5468 9.31323 9.22556 9.59131 8.79658 9.59882C8.26571 9.61085 7.73466 9.61151 7.20345 9.60082V9.59832ZM12.6985 12.3435C11.6496 13.4743 10.3516 14.1327 8.80861 14.3506V11.2197C10.2619 11.0694 11.0638 10.2677 11.2241 8.80769H14.3503C14.1693 10.1685 13.6236 11.3504 12.6985 12.346V12.3435Z" fill="currentColor" />
      </svg>
      <p class="font-bold text-lg">{{ event.driver_name }}</p>
      <svg class="text-dark-electric-blue" width="2" height="2" viewBox="0 0 2 2" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="1" cy="1" r="1" fill="currentColor" />
      </svg>
      <p class="font-medium text-sm text-dark-electric-blue">{{ event.occurence_start_time | dateFormat : 'serverDateTimeFormat' : 'clientDateTimeFormat' }}</p>
    </div>
    <div class="flex items-center gap-2">
      <a *appHasPermission="[[accessGroup.STREAM_VIEWER]]" class="font-medium text-sm text-extra-three cursor-pointer" (click)="handleViewLiveClick(event)">View Live</a>
    </div>
  </div>

  <div *ngIf="event.location || event.temperature" class="flex justify-between items-center">
    <div class="flex items-center gap-2">
      <svg class="text-extra-three" [ngClass]="{ hidden: !event.location }" width="13" height="16" viewBox="0 0 13 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.7052 5.28814C12.0335 1.24475 8.02583 -0.874789 4.29872 0.341876C1.69741 1.18979 -0.000976562 3.58255 -0.000976562 6.67942C0.0137053 7.85141 0.45259 9.22882 1.41845 10.407C2.86776 12.1747 4.35483 13.9147 5.82302 15.6665C6.19741 16.1128 6.59959 16.1123 6.9766 15.6665C8.38851 13.9851 9.80042 12.3031 11.2123 10.6206C12.5122 9.05934 13.0339 7.27363 12.7052 5.28814ZM6.40243 8.61613C5.9055 8.61694 5.41948 8.47335 5.00589 8.20353C4.5923 7.93372 4.26972 7.5498 4.07898 7.10035C3.88823 6.65091 3.83789 6.15615 3.93433 5.67868C4.03077 5.20121 4.26965 4.76249 4.62075 4.41804C4.97184 4.07359 5.41936 3.83888 5.90669 3.74363C6.39402 3.64837 6.89924 3.69685 7.35843 3.88292C7.81762 4.06899 8.21014 4.3843 8.48631 4.78894C8.76248 5.19358 8.90989 5.66936 8.90989 6.15609C8.90851 6.8074 8.64402 7.43172 8.1742 7.89265C7.70438 8.35359 7.06741 8.61369 6.40243 8.61613Z" fill="currentColor" />
      </svg>
      <p class="font-medium text-sm">{{ event.location }}</p>
    </div>
    <div *ngIf="event.temperature" class="flex items-center gap-2">
      <p class="text-sm">{{ event.weather_type }}</p>
      <img *ngIf="event.weather_type === 'Clouds'" ngSrc="assets/svg/weather-icons/atmosphere.svg" width="24" height="24" alt="icon" />
      <img *ngIf="event.weather_type === 'Atmosphere'" ngSrc="assets/svg/weather-icons/atmosphere.svg" width="24" height="24" alt="icon" />
      <img *ngIf="event.weather_type === 'Clear'" ngSrc="assets/svg/weather-icons/clear.svg" width="24" height="24" alt="icon" />
      <img *ngIf="event.weather_type === 'Thunderstorm'" ngSrc="assets/svg/weather-icons/thunderstorm.svg" width="24" height="24" alt="icon" />
      <img *ngIf="event.weather_type === 'Rain'" ngSrc="assets/svg/weather-icons/rain.svg" width="24" height="24" alt="icon" />
      <img *ngIf="event.weather_type === 'Drizzle'" ngSrc="assets/svg/weather-icons/drizzle.svg" width="24" height="24" alt="icon" />
      <img *ngIf="event.weather_type === 'Snow'" ngSrc="assets/svg/weather-icons/snow.svg" width="24" height="24" alt="icon" />
      <p class="font-medium text-sm">{{ event.temperature }}Â°C</p>
    </div>
  </div>
</div>
