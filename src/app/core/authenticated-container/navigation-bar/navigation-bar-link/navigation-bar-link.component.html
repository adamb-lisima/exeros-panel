<div [routerLink]="['/', link]" [routerLinkActive]="''" #mainRouteActive="routerLinkActive">
  <ng-container *ngIf="{ isActive: shouldBeActive(mainRouteActive.isActive, subRouteActive.isActive) } as ctx">
    <a
      class="group flex items-center justify-between py-2 px-3 rounded-lg cursor-pointer hover:bg-cultured"
      [ngClass]="{
        'text-black bg-cultured': ctx.isActive,
        '': !isCollapsed,
        'justify-center': isCollapsed
      }">
      <div class="flex items-center gap-2 flex-grow" [ngClass]="{ 'gap-2': !isCollapsed, 'justify-center w-full': isCollapsed }">
        <div class="text-new-gray group-hover:text-black w-5 h-5" [ngClass]="{ '!text-black': ctx.isActive }">
          <ng-content></ng-content>
        </div>
        <div class="transition-all duration-200 overflow-hidden">
          <p
            class="font-normal text-sm text-new-gray group-hover:text-black"
            [ngClass]="{
              '!text-black': ctx.isActive,
              hidden: isCollapsed
            }">
            {{ text }}
          </p>
        </div>
      </div>
      <div *ngIf="badge && !isCollapsed" class="py-1 px-2 rounded-lg bg-bright-gray ml-auto">
        <p class="opacity-80 font-medium text-xs">{{ badge }}</p>
      </div>
    </a>
  </ng-container>
</div>
<a class="hidden" [routerLink]="['/', subLinkActive ?? 'placeholder']" [routerLinkActive]="''" #subRouteActive="routerLinkActive">
  <span class="sr-only">{{ subLinkActive }}</span>
</a>
