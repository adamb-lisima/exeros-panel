<div class="h-full" style="position: relative;">
  <nav
    *ngIf="configData$ | async as configData"
    class="nav-sidebar"
    [ngClass]="{
      'nav-sidebar--expanded': !isMenuCollapsed,
      'nav-sidebar--collapsed': isMenuCollapsed
    }"
    aria-label="Main navigation">

    <!-- Logo -->
    <div>
      <div class="flex flex-col gap-2 items-center p-4 mb-4 min-h-[56px]">
        <ng-container *ngIf="configData.logo as logo; else defaultLogoTemplate">
          <img [ngSrc]="logo" width="122" height="31" alt="logo-icon" style="filter: brightness(0) invert(1)" [ngClass]="{ hidden: isMenuCollapsed }" />
          <div class="flex items-center gap-2" [ngClass]="{ hidden: isMenuCollapsed }">
            <p class="text-xs" style="color: rgba(255,255,255,0.4)">Powered by</p>
            <img ngSrc="assets/svg/logo-icon.svg" width="50" height="12" alt="logo-icon" style="filter: brightness(0) invert(1)" />
          </div>
        </ng-container>
        <ng-template #defaultLogoTemplate>
          <ng-container *ngIf="!isMenuCollapsed">
            <img ngSrc="assets/svg/logo-icon.svg" width="122" height="31" alt="logo-icon" style="filter: brightness(0) invert(1)" />
          </ng-container>
          <ng-container *ngIf="isMenuCollapsed">
            <img ngSrc="assets/svg/mini-logo.svg" width="40" height="20" alt="logo-icon" style="filter: brightness(0) invert(1)" />
          </ng-container>
        </ng-template>
      </div>

      <!-- Main navigation sections -->
      <div class="flex-1 overflow-y-auto overflow-x-hidden px-2 flex flex-col gap-1" *ngIf="loggedInUser$ | async as loggedInUser">

        <!-- Overview Section -->
        <div class="nav-section">
          <div *ngIf="!isMenuCollapsed" class="nav-section__header">Overview</div>
          <div *ngIf="isMenuCollapsed && false" class="nav-section__divider"></div>
          <app-navigation-bar-link [isCollapsed]="isMenuCollapsed" *appHasPermission="[[accessGroup.DASHBOARD_VIEWER]]" [link]="ROUTE_CONST.dashboard" [text]="'Dashboard'" [tooltipLabel]="'Dashboard'">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <mask id="mask0_901_574" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
                <rect width="20" height="20" fill="#D9D9D9" />
              </mask>
              <g mask="url(#mask0_901_574)">
                <path style="fill: currentColor" fill="currentColor" d="M11.0415 6.74291V3.67395C11.0415 3.45645 11.1139 3.27589 11.2588 3.13228C11.4037 2.98853 11.5831 2.91666 11.7971 2.91666H16.3309C16.545 2.91666 16.7239 2.98853 16.8675 3.13228C17.0113 3.27589 17.0832 3.45645 17.0832 3.67395V6.74291C17.0832 6.96027 17.0107 7.14075 16.8659 7.28437C16.721 7.42812 16.5416 7.49999 16.3275 7.49999H11.7938C11.5796 7.49999 11.4007 7.42812 11.2571 7.28437C11.1134 7.14075 11.0415 6.96027 11.0415 6.74291ZM2.9165 9.66666V3.66645C2.9165 3.45395 2.98893 3.27589 3.1338 3.13228C3.27866 2.98853 3.4581 2.91666 3.67213 2.91666H8.20588C8.42005 2.91666 8.59893 2.98853 8.74255 3.13228C8.8863 3.27603 8.95817 3.45416 8.95817 3.66666V9.66687C8.95817 9.87937 8.88574 10.0574 8.74088 10.201C8.59602 10.3448 8.41657 10.4167 8.20255 10.4167H3.6688C3.45463 10.4167 3.27574 10.3448 3.13213 10.201C2.98838 10.0573 2.9165 9.87916 2.9165 9.66666ZM11.0415 16.3333V10.3331C11.0415 10.1206 11.1139 9.94256 11.2588 9.79895C11.4037 9.6552 11.5831 9.58332 11.7971 9.58332H16.3309C16.545 9.58332 16.7239 9.6552 16.8675 9.79895C17.0113 9.9427 17.0832 10.1208 17.0832 10.3333V16.3335C17.0832 16.546 17.0107 16.7241 16.8659 16.8677C16.721 17.0114 16.5416 17.0833 16.3275 17.0833H11.7938C11.5796 17.0833 11.4007 17.0114 11.2571 16.8677C11.1134 16.7239 11.0415 16.5458 11.0415 16.3333ZM2.9165 16.326V13.2571C2.9165 13.0397 2.98893 12.8592 3.1338 12.7156C3.27866 12.5719 3.4581 12.5 3.67213 12.5H8.20588C8.42005 12.5 8.59893 12.5719 8.74255 12.7156C8.8863 12.8592 8.95817 13.0397 8.95817 13.2571V16.326C8.95817 16.5435 8.88574 16.7241 8.74088 16.8677C8.59602 17.0114 8.41657 17.0833 8.20255 17.0833H3.6688C3.45463 17.0833 3.27574 17.0114 3.13213 16.8677C2.98838 16.7241 2.9165 16.5435 2.9165 16.326ZM4.1665 9.16666H7.70817V4.16666H4.1665V9.16666ZM12.2915 15.8333H15.8332V10.8333H12.2915V15.8333ZM12.2915 6.24999H15.8332V4.16666H12.2915V6.24999ZM4.1665 15.8333H7.70817V13.75H4.1665V15.8333Z" />
              </g>
            </svg>
          </app-navigation-bar-link>
        </div>

        <!-- Fleet Operations Section -->
        <div class="nav-section">
          <div *ngIf="!isMenuCollapsed" class="nav-section__divider"></div>
          <div *ngIf="!isMenuCollapsed" class="nav-section__header">Fleet Operations</div>
          <ng-container *appHasPermission="[[accessGroup.VEHICLES_VIEWER, accessGroup.DRIVERS_VIEWER]]">
            <app-navigation-bar-link [isCollapsed]="isMenuCollapsed" [link]="loggedInUser.access_groups.includes(accessGroup.DRIVERS_VIEWER) ? ROUTE_CONST.drivers : ROUTE_CONST.vehicles" [subLinkActive]="loggedInUser.access_groups.includes(accessGroup.DRIVERS_VIEWER) ? ROUTE_CONST.vehicles : ROUTE_CONST.drivers" [text]="'Fleets'" [tooltipLabel]="'Fleets'">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <mask id="mask0_901_579" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
                  <rect width="20" height="20" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_901_579)">
                  <path style="fill: currentColor" fill="currentColor" d="M5.15213 15.08C4.55116 15.08 4.04032 14.8697 3.61963 14.4492C3.19893 14.0285 2.98859 13.5176 2.98859 12.9167H2.86046C2.44616 12.9167 2.0915 12.7692 1.7965 12.4742C1.5015 12.1792 1.354 11.8245 1.354 11.4102V6.09312C1.354 5.67534 1.5015 5.31923 1.7965 5.02479C2.0915 4.73048 2.44616 4.58333 2.86046 4.58333H13.2786C13.4765 4.58333 13.665 4.62013 13.8442 4.69374C14.0235 4.76736 14.1812 4.87159 14.3171 5.00645L18.1986 8.77562C18.3407 8.91243 18.4507 9.07375 18.5286 9.25958C18.6066 9.44555 18.6457 9.64111 18.6457 9.84624V11.4102C18.6457 11.8245 18.4982 12.1792 18.2032 12.4742C17.9082 12.7692 17.5535 12.9167 17.1392 12.9167C17.1392 13.5176 16.9289 14.0285 16.5082 14.4492C16.0875 14.8697 15.5767 15.08 14.9759 15.08C14.3749 15.08 13.8641 14.8697 13.4434 14.4492C13.0227 14.0285 12.8123 13.5176 12.8123 12.9167H7.31546C7.31546 13.5149 7.10518 14.025 6.68463 14.4471C6.26393 14.869 5.7531 15.08 5.15213 15.08ZM12.1873 8.57374H16.1296L13.3653 5.90541C13.3386 5.88402 13.3105 5.86666 13.2811 5.85333C13.2516 5.84 13.2209 5.83333 13.189 5.83333H12.1873V8.57374ZM7.39567 8.57374H10.9373V5.83333H7.39567V8.57374ZM2.604 8.57374H6.14567V5.83333H2.86046C2.7856 5.83333 2.72414 5.85736 2.67609 5.90541C2.62803 5.95347 2.604 6.01493 2.604 6.08979V8.57374ZM5.15213 13.9583C5.4438 13.9583 5.69032 13.8576 5.89171 13.6562C6.0931 13.4549 6.1938 13.2083 6.1938 12.9167C6.1938 12.625 6.0931 12.3785 5.89171 12.1771C5.69032 11.9757 5.4438 11.875 5.15213 11.875C4.86046 11.875 4.61393 11.9757 4.41255 12.1771C4.21116 12.3785 4.11046 12.625 4.11046 12.9167C4.11046 13.2083 4.21116 13.4549 4.41255 13.6562C4.61393 13.8576 4.86046 13.9583 5.15213 13.9583ZM14.9759 13.9583C15.2675 13.9583 15.5141 13.8576 15.7155 13.6562C15.9169 13.4549 16.0175 13.2083 16.0175 12.9167C16.0175 12.625 15.9169 12.3785 15.7155 12.1771C15.5141 11.9757 15.2675 11.875 14.9759 11.875C14.6842 11.875 14.4377 11.9757 14.2363 12.1771C14.0349 12.3785 13.9342 12.625 13.9342 12.9167C13.9342 13.2083 14.0349 13.4549 14.2363 13.6562C14.4377 13.8576 14.6842 13.9583 14.9759 13.9583ZM6.87317 11.6667H13.2546C13.432 11.4167 13.6694 11.2019 13.9669 11.0225C14.2646 10.8429 14.6009 10.7531 14.9759 10.7531C15.3509 10.7531 15.6831 10.8389 15.9725 11.0104C16.2621 11.1819 16.5036 11.4007 16.6969 11.6667H17.1392C17.2141 11.6667 17.2755 11.6426 17.3236 11.5946C17.3716 11.5465 17.3957 11.4851 17.3957 11.4102V9.82375H2.604V11.4102C2.604 11.4851 2.62803 11.5465 2.67609 11.5946C2.72414 11.6426 2.7856 11.6667 2.86046 11.6667H3.43088C3.60824 11.4167 3.84574 11.2019 4.14338 11.0225C4.44088 10.8429 4.77713 10.7531 5.15213 10.7531C5.52713 10.7531 5.85935 10.8389 6.1488 11.0104C6.43838 11.1819 6.67984 11.4007 6.87317 11.6667Z" />
                </g>
              </svg>
            </app-navigation-bar-link>
          </ng-container>
          <app-navigation-bar-link [isActive]="(isStreamActive$ | async) || false" [isCollapsed]="isMenuCollapsed" *appHasPermission="[[accessGroup.STREAM_VIEWER]]" [link]="ROUTE_CONST.stream" [badge]="!isMenuCollapsed ? configData.online_devices_count : ''" [text]="'Live Stream'" [tooltipLabel]="'Live Stream'">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <mask id="mask0_901_584" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
                <rect width="20" height="20" fill="#D9D9D9" />
              </mask>
              <g mask="url(#mask0_901_584)">
                <path style="fill: currentColor" fill="currentColor" d="M8.70683 12.9887L12.8718 10.3221C12.9863 10.2442 13.0435 10.1368 13.0435 10C13.0435 9.86319 12.9863 9.75583 12.8718 9.67792L8.70683 7.01125C8.57864 6.92472 8.44968 6.91778 8.31995 6.99042C8.19009 7.06306 8.12516 7.17472 8.12516 7.32542V12.6746C8.12516 12.8253 8.19009 12.9369 8.31995 13.0096C8.44968 13.0822 8.57864 13.0753 8.70683 12.9887ZM3.58995 16.25C3.16898 16.25 2.81266 16.1042 2.521 15.8125C2.22933 15.5208 2.0835 15.1645 2.0835 14.7435V5.25646C2.0835 4.83549 2.22933 4.47917 2.521 4.1875C2.81266 3.89583 3.16898 3.75 3.58995 3.75H16.4104C16.8313 3.75 17.1877 3.89583 17.4793 4.1875C17.771 4.47917 17.9168 4.83549 17.9168 5.25646V14.7435C17.9168 15.1645 17.771 15.5208 17.4793 15.8125C17.1877 16.1042 16.8313 16.25 16.4104 16.25H3.58995ZM3.58995 15H16.4104C16.4745 15 16.5333 14.9733 16.5866 14.9198C16.6401 14.8665 16.6668 14.8077 16.6668 14.7435V5.25646C16.6668 5.19229 16.6401 5.13354 16.5866 5.08021C16.5333 5.02674 16.4745 5 16.4104 5H3.58995C3.52579 5 3.46704 5.02674 3.4137 5.08021C3.36023 5.13354 3.3335 5.19229 3.3335 5.25646V14.7435C3.3335 14.8077 3.36023 14.8665 3.4137 14.9198C3.46704 14.9733 3.52579 15 3.58995 15Z" />
              </g>
            </svg>
          </app-navigation-bar-link>
        </div>

        <!-- Safety & Events Section -->
        <div class="nav-section">
          <div *ngIf="!isMenuCollapsed" class="nav-section__divider"></div>
          <div *ngIf="!isMenuCollapsed" class="nav-section__header">Safety & Events</div>
          <app-navigation-bar-link [isCollapsed]="isMenuCollapsed" *appHasPermission="[[accessGroup.EVENTS_VIEWER]]" [link]="ROUTE_CONST.events" [text]="'Events'" [tooltipLabel]="'Events'">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <mask id="mask0_901_589" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
                <rect width="20" height="20" fill="#D9D9D9" />
              </mask>
              <g mask="url(#mask0_901_589)">
                <path style="fill: currentColor" fill="currentColor" d="M12.2434 15C11.7081 15 11.2538 14.8133 10.8805 14.44C10.5071 14.0665 10.3205 13.6122 10.3205 13.0769C10.3205 12.5416 10.5071 12.0873 10.8805 11.714C11.2538 11.3406 11.7081 11.154 12.2434 11.154C12.7787 11.154 13.233 11.3406 13.6065 11.714C13.9798 12.0873 14.1665 12.5416 14.1665 13.0769C14.1665 13.6122 13.9798 14.0665 13.6065 14.44C13.233 14.8133 12.7787 15 12.2434 15ZM4.42296 17.9167C4.00199 17.9167 3.64567 17.7708 3.354 17.4792C3.06234 17.1875 2.9165 16.8312 2.9165 16.4102V5.25646C2.9165 4.83548 3.06234 4.47916 3.354 4.1875C3.64567 3.89583 4.00199 3.75 4.42296 3.75H5.57671V2.62812C5.57671 2.44548 5.63789 2.29298 5.76025 2.17062C5.88262 2.0484 6.03512 1.98729 6.21775 1.98729C6.40053 1.98729 6.55303 2.0484 6.67525 2.17062C6.79762 2.29298 6.8588 2.44548 6.8588 2.62812V3.75H13.173V2.61229C13.173 2.43493 13.2328 2.28639 13.3523 2.16666C13.4721 2.04708 13.6206 1.98729 13.798 1.98729C13.9753 1.98729 14.1238 2.04708 14.2434 2.16666C14.3631 2.28639 14.423 2.43493 14.423 2.61229V3.75H15.5767C15.9977 3.75 16.354 3.89583 16.6457 4.1875C16.9373 4.47916 17.0832 4.83548 17.0832 5.25646V16.4102C17.0832 16.8312 16.9373 17.1875 16.6457 17.4792C16.354 17.7708 15.9977 17.9167 15.5767 17.9167H4.42296ZM4.42296 16.6667H15.5767C15.6409 16.6667 15.6996 16.6399 15.753 16.5865C15.8064 16.5331 15.8332 16.4744 15.8332 16.4102V8.58979H4.1665V16.4102C4.1665 16.4744 4.19324 16.5331 4.24671 16.5865C4.30005 16.6399 4.3588 16.6667 4.42296 16.6667ZM4.1665 7.33979H15.8332V5.25646C15.8332 5.19229 15.8064 5.13354 15.753 5.08021C15.6996 5.02673 15.6409 5 15.5767 5H4.42296C4.3588 5 4.30005 5.02673 4.24671 5.08021C4.19324 5.13354 4.1665 5.19229 4.1665 5.25646V7.33979Z" />
              </g>
            </svg>
          </app-navigation-bar-link>
        </div>

        <!-- Analytics & Reports Section -->
        <div class="nav-section">
          <div *ngIf="!isMenuCollapsed" class="nav-section__divider"></div>
          <div *ngIf="!isMenuCollapsed" class="nav-section__header">Analytics & Reports</div>
          <app-navigation-bar-link [isCollapsed]="isMenuCollapsed" *appHasPermission="[[accessGroup.FLEETS_VIEWER]]" [link]="ROUTE_CONST.fleets" [text]="'Analytics'" [tooltipLabel]="'Analytics'">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6.75 16.5H11.25C15 16.5 16.5 15 16.5 11.25V6.75C16.5 3 15 1.5 11.25 1.5H6.75C3 1.5 1.5 3 1.5 6.75V11.25C1.5 15 3 16.5 6.75 16.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M5.25 8.05469V13.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M9 6.75V13.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M12.75 10.05V13.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </app-navigation-bar-link>
          <app-navigation-bar-link [isCollapsed]="isMenuCollapsed" *appHasPermission="[[accessGroup.TOP_DRIVER_REPORTS_VIEWER, accessGroup.MILEAGE_REPORTS_VIEWER, accessGroup.DRIVING_TIME_REPORTS_VIEWER, accessGroup.VEHICLE_ISSUES_REPORTS_VIEWER, accessGroup.DISTANCE_DRIVEN_REPORTS_VIEWER, accessGroup.EVENTS_REPORTS_VIEWER, accessGroup.ACCIDENTS_REPORTS_VIEWER, accessGroup.ALARMS_REPORTS_VIEWER, accessGroup.TRIPS_REPORTS_VIEWER, accessGroup.VEHICLES_CHECKS_REPORTS_VIEWER, accessGroup.VEHICLE_ONLINE_STATUS_REPORTS_VIEWER, accessGroup.USER_LOGS_REPORTS_VIEWER]]" [link]="ROUTE_CONST.reports" [text]="'Reports'" [tooltipLabel]="'Reports'">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6.75 16.5H11.25C15 16.5 16.5 15 16.5 11.25V6.75C16.5 3 15 1.5 11.25 1.5H6.75C3 1.5 1.5 3 1.5 6.75V11.25C1.5 15 3 16.5 6.75 16.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M5.49756 10.8678L7.28256 8.55031C7.53756 8.22031 8.01006 8.16031 8.34006 8.41531L9.71256 9.49531C10.0426 9.75031 10.5151 9.69031 10.7701 9.36781L12.5026 7.13281" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </app-navigation-bar-link>
          <ng-container *appHasPermission="[[accessGroup.LEADERBOARD_VIEWER]]">
            <app-navigation-bar-link [isCollapsed]="isMenuCollapsed" [link]="ROUTE_CONST.leaderboard" [text]="'Leaderboard'" [tooltipLabel]="'Leaderboard'">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path style="fill: currentColor" fill="currentColor" d="M16.6668 17.5H3.3335C2.9165 17.5 2.59016 17.1736 2.59016 16.7566V14.5833C2.59016 14.1663 2.9165 13.84 3.3335 13.84H4.76683V8.33333C4.76683 7.91633 5.09316 7.59 5.51016 7.59H8.2435C8.6605 7.59 8.98683 7.91633 8.98683 8.33333V13.84H11.0135V5.41666C11.0135 4.99966 11.3398 4.67333 11.7568 4.67333H14.4902C14.9072 4.67333 15.2335 4.99966 15.2335 5.41666V13.84H16.6668C17.0838 13.84 17.4102 14.1663 17.4102 14.5833V16.7566C17.4102 17.1736 17.0838 17.5 16.6668 17.5ZM6.2535 9.077V13.84H7.5002V9.077H6.2535ZM12.5002 6.16V13.84H13.7468V6.16H12.5002ZM3.3335 15.0267V16.013H16.6668V15.0267H3.3335Z" />
              </svg>
            </app-navigation-bar-link>
          </ng-container>
        </div>

        <!-- Monitoring Section -->
        <div class="nav-section">
          <div *ngIf="!isMenuCollapsed" class="nav-section__divider"></div>
          <div *ngIf="!isMenuCollapsed" class="nav-section__header">Monitoring</div>
          <app-navigation-bar-link [isCollapsed]="isMenuCollapsed" *appHasPermission="[[accessGroup.MAP_VIEW]]" [link]="ROUTE_CONST.mapView" [text]="'Map View'" [tooltipLabel]="'Map View'">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path style="fill: currentColor" d="M12.5 8.75C12.5 10.1307 11.3807 11.25 10 11.25C8.61929 11.25 7.5 10.1307 7.5 8.75C7.5 7.36929 8.61929 6.25 10 6.25C11.3807 6.25 12.5 7.36929 12.5 8.75Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path style="fill: currentColor" d="M16.25 8.75C16.25 14.7018 10 18.125 10 18.125C10 18.125 3.75 14.7018 3.75 8.75C3.75 5.29822 6.54822 2.5 10 2.5C13.4518 2.5 16.25 5.29822 16.25 8.75Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </app-navigation-bar-link>
        </div>
      </div>
    </div>

    <!-- Bottom pinned items -->
    <div class="px-2 flex flex-col gap-1 pb-6">
      <div class="h-px mx-3 mb-3" style="background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent)"></div>

      <!-- Settings -->
      <app-navigation-bar-link [isCollapsed]="isMenuCollapsed" *appHasPermission="[settingsAccess]" [link]="ROUTE_CONST.settings" [text]="'Settings'" [tooltipLabel]="'Settings'">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <mask id="mask0_901_600" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
            <rect width="20" height="20" fill="#D9D9D9" />
          </mask>
          <g mask="url(#mask0_901_600)">
            <path style="fill: currentColor" fill="currentColor" d="M9.07711 17.9167C8.79295 17.9167 8.54753 17.8224 8.34086 17.6338C8.13406 17.4453 8.00823 17.2132 7.96336 16.9375L7.75982 15.3781C7.53663 15.3034 7.30774 15.1988 7.07316 15.0642C6.83871 14.9295 6.62906 14.7852 6.4442 14.6315L5.00024 15.2452C4.73843 15.3606 4.47538 15.3718 4.21107 15.2788C3.94663 15.1858 3.74121 15.0171 3.59482 14.7725L2.65566 13.1442C2.50927 12.8996 2.46711 12.6408 2.5292 12.3677C2.59114 12.0948 2.73323 11.8697 2.95545 11.6923L4.20378 10.7548C4.18461 10.6309 4.171 10.5065 4.16295 10.3815C4.15489 10.2565 4.15086 10.132 4.15086 10.0079C4.15086 9.88945 4.15489 9.76904 4.16295 9.64668C4.171 9.52432 4.18461 9.3905 4.20378 9.24522L2.95545 8.30772C2.73323 8.13036 2.59246 7.90383 2.53316 7.62814C2.47385 7.35258 2.51739 7.09244 2.66378 6.84772L3.59482 5.24355C3.74121 5.00425 3.94663 4.83682 4.21107 4.74126C4.47538 4.64557 4.73843 4.65543 5.00024 4.77084L6.43607 5.37668C6.63705 5.21751 6.85156 5.07195 7.07961 4.94001C7.30767 4.80807 7.53177 4.70202 7.75191 4.62188L7.96336 3.06251C8.00823 2.78682 8.13406 2.55473 8.34086 2.36626C8.54753 2.17765 8.79295 2.08334 9.07711 2.08334H10.9234C11.2075 2.08334 11.4529 2.17765 11.6596 2.36626C11.8664 2.55473 11.9923 2.78682 12.0371 3.06251L12.2407 4.6298C12.4907 4.72063 12.7168 4.82668 12.9192 4.94793C13.1217 5.06918 13.3261 5.21209 13.5323 5.37668L15.0084 4.77084C15.27 4.65543 15.5331 4.64557 15.7975 4.74126C16.062 4.83682 16.2673 5.00425 16.4136 5.24355L17.3448 6.85584C17.4912 7.10043 17.5334 7.35925 17.4713 7.6323C17.4093 7.90522 17.2673 8.13036 17.045 8.30772L15.7646 9.26918C15.7945 9.40376 15.8108 9.52959 15.8136 9.64668C15.8162 9.76362 15.8175 9.8814 15.8175 10C15.8175 10.1132 15.8148 10.2283 15.8094 10.3454C15.8041 10.4624 15.785 10.5962 15.7519 10.7469L17.0082 11.6923C17.2304 11.8697 17.3738 12.0948 17.4386 12.3677C17.5032 12.6408 17.4623 12.8996 17.3159 13.1442L16.3719 14.7644C16.2257 15.0091 16.019 15.1779 15.7519 15.2708C15.4848 15.3638 15.2204 15.3525 14.9586 15.2371L13.5323 14.6233C13.3261 14.7879 13.1156 14.9335 12.9009 15.06C12.6861 15.1867 12.4661 15.2901 12.2407 15.3702L12.0371 16.9375C11.9923 17.2132 11.8664 17.4453 11.6596 17.6338C11.4529 17.8224 11.2075 17.9167 10.9234 17.9167H9.07711ZM9.16691 16.6667H10.8048L11.1044 14.4344C11.5297 14.3233 11.9183 14.1654 12.2702 13.9608C12.6223 13.7561 12.9618 13.493 13.2888 13.1715L15.3592 14.0417L16.1798 12.625L14.3721 11.2629C14.4416 11.0471 14.4888 10.8355 14.5138 10.6281C14.5389 10.4209 14.5515 10.2115 14.5515 10C14.5515 9.78307 14.5389 9.57369 14.5138 9.37189C14.4888 9.16994 14.4416 8.96369 14.3721 8.75314L16.1957 7.37501L15.3752 5.95834L13.2807 6.84126C13.0018 6.5432 12.6677 6.27987 12.2784 6.05126C11.8889 5.82265 11.495 5.66077 11.0965 5.56564L10.8336 3.33334H9.17982L8.90399 5.55772C8.47885 5.65814 8.08628 5.81195 7.72628 6.01918C7.36614 6.22654 7.0226 6.49362 6.69566 6.82043L4.62524 5.95834L3.80482 7.37501L5.60441 8.71626C5.53496 8.91404 5.48635 9.11973 5.45857 9.33334C5.43079 9.54695 5.41691 9.77182 5.41691 10.0079C5.41691 10.2249 5.43079 10.4375 5.45857 10.6458C5.48635 10.8542 5.53232 11.0599 5.59649 11.2629L3.80482 12.625L4.62524 14.0417L6.68774 13.1667C7.00399 13.4914 7.34211 13.7574 7.70211 13.9648C8.06225 14.172 8.46024 14.3312 8.89607 14.4423L9.16691 16.6667ZM10.0098 12.5C10.7032 12.5 11.2932 12.2567 11.7798 11.77C12.2665 11.2833 12.5098 10.6933 12.5098 10C12.5098 9.30668 12.2665 8.71668 11.7798 8.23001C11.2932 7.74334 10.7032 7.50001 10.0098 7.50001C9.30788 7.50001 8.71572 7.74334 8.23336 8.23001C7.751 8.71668 7.50982 9.30668 7.50982 10C7.50982 10.6933 7.751 11.2833 8.23336 11.77C8.71572 12.2567 9.30788 12.5 10.0098 12.5Z" />
          </g>
        </svg>
      </app-navigation-bar-link>

      <!-- User Profile -->
      <app-navigation-bar-user [isCollapsed]="isMenuCollapsed"></app-navigation-bar-user>

      <!-- Logout -->
      <app-navigation-bar-link [isCollapsed]="isMenuCollapsed" (click)="handleLogoutClick()" (keydown.enter)="handleLogoutClick()" [text]="'Log out'" [tooltipLabel]="'Log out'">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <mask id="mask0_901_812" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
            <rect width="20" height="20" fill="#D9D9D9" />
          </mask>
          <g mask="url(#mask0_901_812)">
            <path style="fill: currentColor" fill="currentColor" d="M16.9759 10.625H7.77234C7.59498 10.625 7.44643 10.5651 7.32671 10.4454C7.20713 10.3258 7.14734 10.1774 7.14734 9.99999C7.14734 9.82263 7.20713 9.67416 7.32671 9.55457C7.44643 9.43485 7.59498 9.37499 7.77234 9.37499H16.9759L15.8988 8.29811C15.7749 8.17409 15.7138 8.02902 15.7155 7.86291C15.717 7.6968 15.7781 7.54909 15.8988 7.41978C16.0281 7.29062 16.1766 7.22388 16.3444 7.21957C16.5121 7.21527 16.6605 7.27777 16.7898 7.40707L18.8555 9.4727C19.0062 9.62339 19.0815 9.79916 19.0815 9.99999C19.0815 10.2008 19.0062 10.3766 18.8555 10.5273L16.7898 12.5929C16.6659 12.7168 16.5188 12.778 16.3484 12.7764C16.178 12.7748 16.0281 12.7094 15.8988 12.5802C15.7781 12.4509 15.7156 12.3045 15.7113 12.141C15.7071 11.9776 15.7696 11.8312 15.8988 11.7019L16.9759 10.625ZM12.6682 6.76291V4.42311C12.6682 4.34825 12.6441 4.2868 12.5961 4.23874C12.5479 4.19068 12.4864 4.16666 12.4117 4.16666H4.42296C4.3481 4.16666 4.28664 4.19068 4.23859 4.23874C4.19053 4.2868 4.1665 4.34825 4.1665 4.42311V15.5769C4.1665 15.6517 4.19053 15.7132 4.23859 15.7612C4.28664 15.8093 4.3481 15.8333 4.42296 15.8333H12.4117C12.4864 15.8333 12.5479 15.8093 12.5961 15.7612C12.6441 15.7132 12.6682 15.6517 12.6682 15.5769V13.2371C12.6682 13.0599 12.728 12.9114 12.8475 12.7917C12.9673 12.6721 13.1158 12.6123 13.2932 12.6123C13.4705 12.6123 13.619 12.6721 13.7386 12.7917C13.8583 12.9114 13.9182 13.0599 13.9182 13.2371V15.5769C13.9182 15.9924 13.7709 16.3474 13.4765 16.6419C13.1822 16.9362 12.8273 17.0833 12.4117 17.0833H4.42296C4.00741 17.0833 3.65241 16.9362 3.35796 16.6419C3.06366 16.3474 2.9165 15.9924 2.9165 15.5769V4.42311C2.9165 4.00756 3.06366 3.65256 3.35796 3.35811C3.65241 3.06381 4.00741 2.91666 4.42296 2.91666H12.4117C12.8273 2.91666 13.1822 3.06381 13.4765 3.35811C13.7709 3.65256 13.9182 4.00756 13.9182 4.42311V6.76291C13.9182 6.94013 13.8583 7.0886 13.7386 7.20832C13.619 7.32791 13.4705 7.3877 13.2932 7.3877C13.1158 7.3877 12.9673 7.32791 12.8475 7.20832C12.728 7.0886 12.6682 6.94013 12.6682 6.76291Z" />
          </g>
        </svg>
      </app-navigation-bar-link>
    </div>

    <!-- Collapse/Expand toggle button -->
    <button
      class="absolute z-[3] flex items-center justify-center w-7 h-7 p-0 rounded-full cursor-pointer focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-500 focus-visible:outline-offset-2"
      style="right: -14px; top: 50%; transform: translateY(-50%); background: #ee8444; border: 2px solid #1a1d2e; box-shadow: 0 2px 8px rgba(238,132,68,0.3); color: #fff"
      (click)="toggleMenu()"
      [attr.aria-label]="isMenuCollapsed ? 'Expand navigation' : 'Collapse navigation'"
      type="button">
      <svg width="16" height="16" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="transition-transform duration-200" [ngClass]="{ 'rotate-180': isMenuCollapsed }">
        <mask id="mask0_901_610" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
          <rect width="20" height="20" fill="#D9D9D9" />
        </mask>
        <g mask="url(#mask0_901_610)">
          <path style="fill: #fff" fill="currentColor" d="M8.71133 9.99999L12.1057 13.3942C12.221 13.5096 12.28 13.6546 12.2828 13.8294C12.2854 14.004 12.2264 14.1517 12.1057 14.2725C11.9849 14.3932 11.8385 14.4535 11.6665 14.4535C11.4946 14.4535 11.3482 14.3932 11.2274 14.2725L7.48217 10.5273C7.40425 10.4492 7.34925 10.3669 7.31717 10.2804C7.28508 10.1939 7.26904 10.1004 7.26904 9.99999C7.26904 9.89958 7.28508 9.8061 7.31717 9.71958C7.34925 9.63305 7.40425 9.55076 7.48217 9.4727L11.2274 5.72749C11.3428 5.61221 11.4879 5.55319 11.6626 5.55041C11.8372 5.54777 11.9849 5.6068 12.1057 5.72749C12.2264 5.84832 12.2868 5.99471 12.2868 6.16666C12.2868 6.3386 12.2264 6.48499 12.1057 6.60583L8.71133 9.99999Z" />
        </g>
      </svg>
    </button>
  </nav>
</div>
